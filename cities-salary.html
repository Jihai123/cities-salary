<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" />
  <title>ä¸­å›½å„åŸå¸‚äººå‡å¯æ”¯é…æ”¶å…¥</title>
  <style>
    /* ========== CSSå˜é‡ ========== */
    :root {
      --bg-dark: #020617;
      --bg-mid: #0f172a;
      --bg-light: #1e293b;
      --primary: #06b6d4;
      --secondary: #3b82f6;
      --accent: #8b5cf6;
      --success: #10b981;
      --warning: #f59e0b;
      --danger: #ef4444;
      --text-primary: #f1f5f9;
      --text-secondary: #94a3b8;
      --border: rgba(6, 182, 212, 0.2);
      --glow: rgba(6, 182, 212, 0.3);
      --card-bg: rgba(15, 23, 42, 0.8);
    }

    /* ========== å…¨å±€æ ·å¼ ========== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Microsoft YaHei', 'Segoe UI', system-ui, sans-serif;
      background: var(--bg-dark);
      color: var(--text-primary);
      overflow-x: hidden;
      line-height: 1.6;
    }

    /* ========== ç²’å­èƒŒæ™¯Canvas ========== */
    #particleCanvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      pointer-events: none;
    }

    /* ========== ä¸»å®¹å™¨ ========== */
    .container {
      position: relative;
      z-index: 1;
      max-width: 1920px;
      margin: 0 auto;
      padding: 0;
    }

    /* ========== é¡¶éƒ¨å¯¼èˆªæ  ========== */
    .navbar {
      position: sticky;
      top: 0;
      z-index: 100;
      background: linear-gradient(135deg, rgba(15, 23, 42, 0.95), rgba(30, 41, 59, 0.9));
      backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--border);
      box-shadow: 0 4px 30px rgba(0, 0, 0, 0.5);
    }

    .navbar-content {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 16px 24px;
      max-width: 1920px;
      margin: 0 auto;
    }

    .logo-section {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .logo-icon {
      width: 40px;
      height: 40px;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 20px var(--glow);
      animation: pulse 2s ease-in-out infinite;
    }

    .logo-icon::before {
      content: 'ğŸ“Š';
      font-size: 24px;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); box-shadow: 0 0 20px var(--glow); }
      50% { transform: scale(1.05); box-shadow: 0 0 30px var(--glow); }
    }

    .logo-text h1 {
      font-size: 24px;
      font-weight: 700;
      background: linear-gradient(135deg, var(--primary), var(--accent));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      margin: 0;
    }

    .logo-text p {
      font-size: 12px;
      color: var(--text-secondary);
      margin: 4px 0 0 0;
    }

    .nav-actions {
      display: flex;
      gap: 12px;
    }

    .btn {
      padding: 10px 20px;
      border: 1px solid var(--border);
      background: rgba(6, 182, 212, 0.1);
      color: var(--primary);
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      transition: all 0.3s ease;
      text-decoration: none;
      display: inline-block;
    }

    .btn:hover {
      background: rgba(6, 182, 212, 0.2);
      border-color: var(--primary);
      box-shadow: 0 0 20px rgba(6, 182, 212, 0.4);
      transform: translateY(-2px);
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      border: none;
      color: white;
    }

    .btn-primary:hover {
      box-shadow: 0 0 30px var(--glow);
    }

    /* ========== æ§åˆ¶é¢æ¿ ========== */
    .control-panel {
      padding: 24px;
      background: var(--card-bg);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--border);
    }

    .control-content {
      max-width: 1920px;
      margin: 0 auto;
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
      align-items: center;
    }

    .search-box {
      flex: 1;
      min-width: 250px;
      position: relative;
    }

    .search-box input {
      width: 100%;
      padding: 12px 16px 12px 44px;
      background: rgba(15, 23, 42, 0.6);
      border: 1px solid var(--border);
      border-radius: 10px;
      color: var(--text-primary);
      font-size: 14px;
      transition: all 0.3s ease;
    }

    .search-box input:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 20px rgba(6, 182, 212, 0.3);
      background: rgba(15, 23, 42, 0.9);
    }

    .search-box::before {
      content: 'ğŸ”';
      position: absolute;
      left: 16px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 18px;
    }

    .filter-group {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }

    .filter-btn {
      padding: 10px 16px;
      background: rgba(6, 182, 212, 0.1);
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text-secondary);
      font-size: 13px;
      cursor: pointer;
      transition: all 0.3s ease;
      white-space: nowrap;
    }

    .filter-btn:hover, .filter-btn.active {
      background: rgba(6, 182, 212, 0.2);
      border-color: var(--primary);
      color: var(--primary);
    }

    /* ========== Tabæ ‡ç­¾é¡µ ========== */
    .tab-nav {
      display: flex;
      gap: 8px;
      padding: 0 24px;
      background: var(--card-bg);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--border);
      overflow-x: auto;
    }

    .tab-nav::-webkit-scrollbar {
      height: 0;
    }

    .tab-item {
      padding: 16px 24px;
      color: var(--text-secondary);
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      border-bottom: 3px solid transparent;
      transition: all 0.3s ease;
      white-space: nowrap;
    }

    .tab-item:hover {
      color: var(--primary);
    }

    .tab-item.active {
      color: var(--primary);
      border-bottom-color: var(--primary);
      background: rgba(6, 182, 212, 0.05);
    }

    /* ========== å†…å®¹åŒºåŸŸ ========== */
    .content {
      padding: 24px;
      max-width: 1920px;
      margin: 0 auto;
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
      animation: fadeInUp 0.5s ease;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* ========== æ•°æ®å¡ç‰‡ç½‘æ ¼ ========== */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
      margin-bottom: 24px;
    }

    .stat-card {
      background: var(--card-bg);
      backdrop-filter: blur(20px);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 24px;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .stat-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 4px;
      height: 100%;
      background: linear-gradient(180deg, var(--primary), var(--accent));
    }

    .stat-card:hover {
      border-color: var(--primary);
      box-shadow: 0 8px 30px rgba(6, 182, 212, 0.2);
      transform: translateY(-4px);
    }

    .stat-label {
      font-size: 13px;
      color: var(--text-secondary);
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .stat-value {
      font-size: 32px;
      font-weight: 700;
      color: var(--primary);
      line-height: 1;
      margin-bottom: 8px;
    }

    .stat-change {
      font-size: 12px;
      color: var(--success);
    }

    /* ========== å›¾è¡¨å®¹å™¨ ========== */
    .chart-container {
      background: var(--card-bg);
      backdrop-filter: blur(20px);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 24px;
    }

    .chart-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      flex-wrap: wrap;
      gap: 12px;
    }

    .chart-title {
      font-size: 18px;
      font-weight: 700;
      color: var(--text-primary);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .chart-title::before {
      content: '';
      width: 4px;
      height: 20px;
      background: linear-gradient(180deg, var(--primary), var(--accent));
      border-radius: 2px;
    }

    .chart-actions {
      display: flex;
      gap: 8px;
    }

    .chart-body {
      width: 100%;
      height: 500px;
      position: relative;
    }

    /* ========== æ’è¡Œæ¦œåˆ—è¡¨ ========== */
    .ranking-list {
      display: grid;
      gap: 12px;
    }

    .ranking-item {
      background: var(--card-bg);
      backdrop-filter: blur(20px);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 16px 20px;
      display: flex;
      align-items: center;
      gap: 16px;
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .ranking-item:hover {
      border-color: var(--primary);
      box-shadow: 0 4px 20px rgba(6, 182, 212, 0.2);
      transform: translateX(8px);
    }

    .rank-badge {
      width: 40px;
      height: 40px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 16px;
      flex-shrink: 0;
      background: rgba(6, 182, 212, 0.1);
      border: 1px solid var(--border);
      color: var(--primary);
    }

    .ranking-item:nth-child(1) .rank-badge {
      background: linear-gradient(135deg, #ffd700, #ffed4e);
      color: #000;
      border: none;
      box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
    }

    .ranking-item:nth-child(2) .rank-badge {
      background: linear-gradient(135deg, #c0c0c0, #e8e8e8);
      color: #000;
      border: none;
    }

    .ranking-item:nth-child(3) .rank-badge {
      background: linear-gradient(135deg, #cd7f32, #e9a76f);
      color: #fff;
      border: none;
    }

    .rank-info {
      flex: 1;
    }

    .rank-city {
      font-size: 16px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 4px;
    }

    .rank-province {
      font-size: 12px;
      color: var(--text-secondary);
    }

    .rank-salary {
      text-align: right;
    }

    .salary-value {
      font-size: 20px;
      font-weight: 700;
      color: var(--primary);
      display: block;
    }

    .salary-tier {
      font-size: 11px;
      color: var(--text-secondary);
      margin-top: 2px;
    }

    /* ========== å¯¹æ¯”è¡¨æ ¼ ========== */
    .comparison-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 20px;
    }

    .comparison-card {
      background: var(--card-bg);
      backdrop-filter: blur(20px);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 20px;
      transition: all 0.3s ease;
    }

    .comparison-card:hover {
      border-color: var(--primary);
      box-shadow: 0 8px 30px rgba(6, 182, 212, 0.2);
    }

    .comparison-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
      padding-bottom: 16px;
      border-bottom: 1px solid var(--border);
    }

    .comparison-city {
      font-size: 20px;
      font-weight: 700;
      color: var(--primary);
    }

    .comparison-rank {
      font-size: 14px;
      color: var(--text-secondary);
    }

    .comparison-stats {
      display: grid;
      gap: 12px;
    }

    .comparison-row {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px solid rgba(6, 182, 212, 0.1);
    }

    .comparison-label {
      color: var(--text-secondary);
      font-size: 13px;
    }

    .comparison-value {
      color: var(--text-primary);
      font-weight: 600;
      font-size: 14px;
    }

    /* ========== åŠ è½½æç¤º ========== */
    .loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(2, 6, 23, 0.9);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      transition: opacity 0.5s ease;
    }

    .loading-overlay.hide {
      opacity: 0;
      pointer-events: none;
    }

    .spinner {
      width: 60px;
      height: 60px;
      border: 4px solid rgba(6, 182, 212, 0.2);
      border-top-color: var(--primary);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .loading-text {
      margin-top: 20px;
      font-size: 16px;
      color: var(--primary);
      letter-spacing: 1px;
    }

    /* ========== å“åº”å¼ ========== */
    @media (max-width: 1024px) {
      .chart-body {
        height: 400px;
      }
    }

    @media (max-width: 768px) {
      .navbar-content {
        padding: 12px 16px;
      }
      
      .logo-text h1 {
        font-size: 18px;
      }
      
      .logo-text p {
        display: none;
      }
      
      .control-panel {
        padding: 16px;
      }
      
      .content {
        padding: 16px;
      }
      
      .stats-grid {
        grid-template-columns: 1fr;
      }
      
      .chart-body {
        height: 350px;
      }
      
      .tab-nav {
        padding: 0 16px;
      }
      
      .tab-item {
        padding: 12px 16px;
        font-size: 14px;
      }
      
      .comparison-grid {
        grid-template-columns: 1fr;
      }
    }

    /* ========== æ»šåŠ¨æ¡ç¾åŒ– ========== */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-track {
      background: var(--bg-mid);
    }

    ::-webkit-scrollbar-thumb {
      background: linear-gradient(180deg, var(--primary), var(--secondary));
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--primary);
    }

    /* ========== æ•°æ®è¯´æ˜å¼¹çª— ========== */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(2, 6, 23, 0.8);
      backdrop-filter: blur(8px);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 10000;
      animation: fadeIn 0.3s ease;
    }

    .modal-overlay.active {
      display: flex;
    }

    .modal-content {
      background: var(--card-bg);
      backdrop-filter: blur(20px);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 32px;
      max-width: 600px;
      max-height: 80vh;
      overflow-y: auto;
      position: relative;
      animation: slideUp 0.3s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
      padding-bottom: 16px;
      border-bottom: 1px solid var(--border);
    }

    .modal-title {
      font-size: 22px;
      font-weight: 700;
      color: var(--primary);
    }

    .modal-close {
      width: 32px;
      height: 32px;
      border-radius: 8px;
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid rgba(239, 68, 68, 0.3);
      color: var(--danger);
      cursor: pointer;
      font-size: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }

    .modal-close:hover {
      background: rgba(239, 68, 68, 0.2);
      transform: rotate(90deg);
    }

    .modal-body {
      color: var(--text-secondary);
      line-height: 1.8;
    }

    .modal-section {
      margin-bottom: 20px;
    }

    .modal-section h3 {
      color: var(--text-primary);
      font-size: 16px;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .modal-section h3::before {
      content: '';
      width: 4px;
      height: 16px;
      background: linear-gradient(180deg, var(--primary), var(--accent));
      border-radius: 2px;
    }

    .modal-section p, .modal-section ul {
      font-size: 14px;
      color: var(--text-secondary);
      margin-top: 8px;
    }

    .modal-section ul {
      padding-left: 20px;
    }

    .modal-section li {
      margin: 6px 0;
    }

    .data-badge {
      display: inline-block;
      padding: 4px 12px;
      background: rgba(6, 182, 212, 0.1);
      border: 1px solid var(--border);
      border-radius: 6px;
      color: var(--primary);
      font-size: 12px;
      font-weight: 600;
      margin: 4px 4px 4px 0;
    }

    .warning-box {
      background: rgba(245, 158, 11, 0.1);
      border-left: 4px solid var(--warning);
      padding: 12px 16px;
      border-radius: 8px;
      margin-top: 12px;
    }

    .warning-box p {
      color: var(--warning);
      font-size: 13px;
      margin: 0;
    }

    /* ========== é¡µè„šä¿¡æ¯ ========== */
    .footer {
      background: var(--card-bg);
      backdrop-filter: blur(20px);
      border-top: 1px solid var(--border);
      padding: 32px 24px;
      margin-top: 48px;
    }

    .footer-content {
      max-width: 1920px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 32px;
    }

    .footer-section h4 {
      color: var(--primary);
      font-size: 16px;
      margin-bottom: 12px;
    }

    .footer-section p, .footer-section li {
      color: var(--text-secondary);
      font-size: 13px;
      line-height: 1.8;
      margin: 6px 0;
    }

    .footer-section ul {
      list-style: none;
      padding: 0;
    }

    .footer-section a {
      color: var(--text-secondary);
      text-decoration: none;
      transition: color 0.3s ease;
    }

    .footer-section a:hover {
      color: var(--primary);
    }

    .footer-bottom {
      text-align: center;
      padding: 16px;
      color: var(--text-secondary);
      font-size: 12px;
      border-top: 1px solid var(--border);
      margin-top: 24px;
    }
  </style>
</head>
<body>
  <!-- ç²’å­èƒŒæ™¯ -->
  <canvas id="particleCanvas"></canvas>

  <!-- åŠ è½½ç•Œé¢ -->
  <div class="loading-overlay" id="loading">
    <div class="spinner"></div>
    <div class="loading-text">æ­£åœ¨åŠ è½½æ•°æ®...</div>
  </div>

  <!-- ä¸»å®¹å™¨ -->
  <div class="container">
    <!-- é¡¶éƒ¨å¯¼èˆª -->
    <nav class="navbar">
      <div class="navbar-content">
        <div class="logo-section">
          <div class="logo-icon"></div>
          <div class="logo-text">
            <h1>ä¸­å›½å„åŸå¸‚äººå‡å¯æ”¯é…æ”¶å…¥æ¦œå•</h1>
            <p>å„åŸå¸‚å¹³å‡å·¥èµ„å¯è§†åŒ–åˆ†æ</p>
          </div>
        </div>
        <div class="nav-actions">
          <button class="btn" onclick="openDataInfo()">ğŸ“‹ æ•°æ®è¯´æ˜</button>
          <button class="btn" onclick="window.location.reload()">ğŸ”„ åˆ·æ–°æ•°æ®</button>
        </div>
      </div>
    </nav>

    <!-- æ§åˆ¶é¢æ¿ -->
    <div class="control-panel">
      <div class="control-content">
        <div class="search-box">
          <input type="text" id="searchInput" placeholder="æœç´¢åŸå¸‚åç§°æˆ–çœä»½..." />
        </div>
        <div class="filter-group">
          <button class="filter-btn active" data-tier="all">å…¨éƒ¨</button>
          <button class="filter-btn" data-tier="ä¸€çº¿">ä¸€çº¿åŸå¸‚</button>
          <button class="filter-btn" data-tier="æ–°ä¸€çº¿">æ–°ä¸€çº¿</button>
          <button class="filter-btn" data-tier="äºŒçº¿">äºŒçº¿åŸå¸‚</button>
          <button class="filter-btn" data-tier="ä¸‰çº¿">ä¸‰çº¿åŸå¸‚</button>
          <button class="filter-btn" data-tier="å››çº¿">å››çº¿åŸå¸‚</button>
        </div>
      </div>

      <!-- é«˜çº§ç­›é€‰ -->
      <div class="control-content" style="margin-top: 16px; padding-top: 16px; border-top: 1px solid var(--border);">
        <div style="flex: 1; min-width: 200px;">
          <label style="color: var(--text-secondary); font-size: 13px; margin-bottom: 8px; display: block;">ğŸ—ºï¸ é€‰æ‹©çœä»½</label>
          <select id="provinceFilter" class="btn" style="width: 100%; text-align: left;">
            <option value="all">å…¨éƒ¨çœä»½</option>
          </select>
        </div>

        <div style="flex: 2; min-width: 300px;">
          <label style="color: var(--text-secondary); font-size: 13px; margin-bottom: 8px; display: block;">
            ğŸ’° å·¥èµ„èŒƒå›´ï¼š<span id="salaryRangeText">1.2ä¸‡ - 19ä¸‡</span>
          </label>
          <div style="display: flex; gap: 12px; align-items: center;">
            <input type="range" id="salaryMinRange" min="10000" max="190000" value="12000" step="10000"
                   style="flex: 1; height: 6px; background: linear-gradient(90deg, var(--primary), var(--secondary)); border-radius: 3px; outline: none;">
            <input type="range" id="salaryMaxRange" min="10000" max="190000" value="190000" step="10000"
                   style="flex: 1; height: 6px; background: linear-gradient(90deg, var(--primary), var(--secondary)); border-radius: 3px; outline: none;">
          </div>
        </div>

        <div style="display: flex; gap: 8px;">
          <button class="btn btn-primary" onclick="applyAdvancedFilter()">ğŸ” åº”ç”¨ç­›é€‰</button>
          <button class="btn" onclick="resetFilters()">ğŸ”„ é‡ç½®</button>
        </div>
      </div>
    </div>

    <!-- Tabå¯¼èˆª -->
    <div class="tab-nav">
      <div class="tab-item active" data-tab="overview">ğŸ“Š æ•°æ®æ€»è§ˆ</div>
      <div class="tab-item" data-tab="map">ğŸ—ºï¸ åœ°å›¾åˆ†å¸ƒ</div>
      <div class="tab-item" data-tab="ranking">ğŸ† æ’è¡Œæ¦œ</div>
      <div class="tab-item" data-tab="comparison">âš–ï¸ åŸå¸‚å¯¹æ¯”</div>
      <div class="tab-item" data-tab="analysis">ğŸ“ˆ æ•°æ®åˆ†æ</div>
    </div>

    <!-- å†…å®¹åŒºåŸŸ -->
    <div class="content">
      <!-- Tab 1: æ•°æ®æ€»è§ˆ -->
      <div class="tab-content active" id="overview">
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-label">ğŸ“ è¦†ç›–åŸå¸‚æ•°é‡</div>
            <div class="stat-value" id="totalCities">0</div>
            <div class="stat-change">è¦†ç›–å…¨å›½ä¸»è¦åŸå¸‚</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">ğŸ’° å¹³å‡å·¥èµ„</div>
            <div class="stat-value" id="avgSalary">Â¥0</div>
            <div class="stat-change">ç®—æœ¯å¹³å‡å€¼</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">ğŸ“Š ä¸­ä½æ•°å·¥èµ„</div>
            <div class="stat-value" id="medianSalary">Â¥0</div>
            <div class="stat-change">æ›´å‡†ç¡®åæ˜ æ•´ä½“æ°´å¹³</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">ğŸ“ˆ æœ€é«˜å·¥èµ„</div>
            <div class="stat-value" id="maxSalary">Â¥0</div>
            <div class="stat-change" id="maxCity">-</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">ğŸ“‰ æœ€ä½å·¥èµ„</div>
            <div class="stat-value" id="minSalary">Â¥0</div>
            <div class="stat-change" id="minCity">-</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">ğŸ“ æ ‡å‡†å·®</div>
            <div class="stat-value" id="stdDev">Â¥0</div>
            <div class="stat-change">æ•°æ®ç¦»æ•£ç¨‹åº¦</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">âš–ï¸ å·¥èµ„å·®è·</div>
            <div class="stat-value" id="salaryGap">0x</div>
            <div class="stat-change">æœ€é«˜/æœ€ä½æ¯”å€¼</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">ğŸ¯ è¶…10ä¸‡åŸå¸‚</div>
            <div class="stat-value" id="highSalaryCities">0ä¸ª</div>
            <div class="stat-change">å¹´è–ªè¶…è¿‡10ä¸‡å…ƒ</div>
          </div>
        </div>

        <!-- æ•°æ®æ´å¯Ÿ -->
        <div class="chart-container">
          <div class="chart-header">
            <div class="chart-title">ğŸ’¡ æ•°æ®æ´å¯Ÿ</div>
          </div>
          <div id="dataInsights" style="padding: 20px; color: var(--text-secondary); line-height: 2;">
            <p>æ­£åœ¨åˆ†ææ•°æ®...</p>
          </div>
        </div>

        <div class="chart-container">
          <div class="chart-header">
            <div class="chart-title">åŸå¸‚å·¥èµ„åˆ†å¸ƒæ¦‚è§ˆ</div>
          </div>
          <div class="chart-body" id="chartOverview"></div>
        </div>

        <div class="chart-container">
          <div class="chart-header">
            <div class="chart-title">åŸå¸‚ç­‰çº§å·¥èµ„å¯¹æ¯”</div>
          </div>
          <div class="chart-body" id="chartTier"></div>
        </div>
      </div>

      <!-- Tab 2: åœ°å›¾åˆ†å¸ƒ -->
      <div class="tab-content" id="map">
        <div class="chart-container">
          <div class="chart-header">
            <div class="chart-title">çœä»½å·¥èµ„æ’è¡Œæ¦œï¼ˆTOP30ï¼‰</div>
          </div>
          <div class="chart-body" id="chartMap" style="height: 600px;"></div>
        </div>

        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-label">ğŸ† å·¥èµ„æœ€é«˜çœä»½</div>
            <div class="stat-value" id="topProvince">-</div>
            <div class="stat-change" id="topProvinceSalary">-</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">ğŸ“Š ä¸œéƒ¨å¹³å‡å·¥èµ„</div>
            <div class="stat-value" id="eastAvg">Â¥0</div>
            <div class="stat-change">æ²¿æµ·å‘è¾¾åœ°åŒº</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">ğŸ“Š ä¸­éƒ¨å¹³å‡å·¥èµ„</div>
            <div class="stat-value" id="centralAvg">Â¥0</div>
            <div class="stat-change">ä¸­éƒ¨å…­çœ</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">ğŸ“Š è¥¿éƒ¨å¹³å‡å·¥èµ„</div>
            <div class="stat-value" id="westAvg">Â¥0</div>
            <div class="stat-change">è¥¿éƒ¨åœ°åŒº</div>
          </div>
        </div>

        <div class="chart-container">
          <div class="chart-header">
            <div class="chart-title">åŒºåŸŸå¯¹æ¯”åˆ†æ</div>
          </div>
          <div class="chart-body" id="chartRegion"></div>
        </div>
      </div>

      <!-- Tab 3: æ’è¡Œæ¦œ -->
      <div class="tab-content" id="ranking">
        <div class="chart-container">
          <div class="chart-header">
            <div class="chart-title">TOP 50 åŸå¸‚å·¥èµ„æ’è¡Œ</div>
          </div>
          <div class="chart-body" id="chartRanking"></div>
        </div>

        <div class="ranking-list" id="rankingList"></div>
      </div>

      <!-- Tab 3: åŸå¸‚å¯¹æ¯” -->
      <div class="tab-content" id="comparison">
        <div class="chart-container">
          <div class="chart-header">
            <div class="chart-title">é€‰æ‹©åŸå¸‚è¿›è¡Œå¯¹æ¯”</div>
          </div>
          <div style="margin-bottom: 20px;">
            <select id="compareCity1" class="btn" style="margin-right: 10px;">
              <option>é€‰æ‹©åŸå¸‚1</option>
            </select>
            <select id="compareCity2" class="btn">
              <option>é€‰æ‹©åŸå¸‚2</option>
            </select>
            <button class="btn btn-primary" onclick="updateComparison()" style="margin-left: 10px;">å¼€å§‹å¯¹æ¯”</button>
          </div>
          <div class="comparison-grid" id="comparisonGrid"></div>
        </div>

        <div class="chart-container">
          <div class="chart-header">
            <div class="chart-title">å¯¹æ¯”å›¾è¡¨</div>
          </div>
          <div class="chart-body" id="chartComparison"></div>
        </div>
      </div>

      <!-- Tab 4: æ•°æ®åˆ†æ -->
      <div class="tab-content" id="analysis">
        <div class="chart-container">
          <div class="chart-header">
            <div class="chart-title">å·¥èµ„åŒºé—´åˆ†å¸ƒ</div>
          </div>
          <div class="chart-body" id="chartDistribution"></div>
        </div>

        <div class="chart-container">
          <div class="chart-header">
            <div class="chart-title">çœä»½å¹³å‡å·¥èµ„</div>
          </div>
          <div class="chart-body" id="chartProvince"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- æ•°æ®è¯´æ˜å¼¹çª— -->
  <div class="modal-overlay" id="dataInfoModal">
    <div class="modal-content">
      <div class="modal-header">
        <div class="modal-title">ğŸ“Š æ•°æ®è¯´æ˜ä¸æ¥æº</div>
        <button class="modal-close" onclick="closeDataInfo()">Ã—</button>
      </div>
      <div class="modal-body">
        <div class="modal-section">
          <h3>ğŸ“… æ•°æ®æ›´æ–°æ—¶é—´</h3>
          <p><span class="data-badge">æœ€åæ›´æ–°ï¼š2024å¹´12æœˆ</span></p>
          <p>æ•°æ®åŸºäºå„åœ°ç»Ÿè®¡å±€å…¬å¼€å‘å¸ƒçš„åŸé•‡éç§è¥å•ä½å°±ä¸šäººå‘˜å¹´å¹³å‡å·¥èµ„æ•°æ®æ•´ç†ã€‚</p>
        </div>

        <div class="modal-section">
          <h3>ğŸ“– æ•°æ®å®šä¹‰</h3>
          <p><strong>äººå‡å¯æ”¯é…æ”¶å…¥</strong>ï¼šæŒ‡åŸé•‡éç§è¥å•ä½å°±ä¸šäººå‘˜å¹´å¹³å‡å·¥èµ„æ€»é¢ï¼ŒåŒ…å«ï¼š</p>
          <ul>
            <li>åŸºæœ¬å·¥èµ„ã€å¥–é‡‘ã€æ´¥è´´å’Œè¡¥è´´</li>
            <li>åŠ ç­åŠ ç‚¹å·¥èµ„</li>
            <li>ç‰¹æ®Šæƒ…å†µä¸‹æ”¯ä»˜çš„å·¥èµ„</li>
            <li>ä¸åŒ…æ‹¬äº”é™©ä¸€é‡‘ä¸ªäººç¼´çº³éƒ¨åˆ†</li>
          </ul>
        </div>

        <div class="modal-section">
          <h3>ğŸ” æ•°æ®æ¥æº</h3>
          <p>æ•°æ®ä¸»è¦æ¥æºäºä»¥ä¸‹æ¸ é“ï¼š</p>
          <ul>
            <li>å›½å®¶ç»Ÿè®¡å±€å®˜æ–¹ç»Ÿè®¡å…¬æŠ¥</li>
            <li>å„çœå¸‚ç»Ÿè®¡å±€å¹´åº¦ç»Ÿè®¡æ•°æ®</li>
            <li>äººåŠ›èµ„æºå’Œç¤¾ä¼šä¿éšœéƒ¨é—¨å…¬å¼€æ•°æ®</li>
            <li>éƒ¨åˆ†åœ°åŒºä¸ºæ ¹æ®åŒºåŸŸç»Ÿè®¡æ•°æ®ä¼°ç®—</li>
          </ul>
        </div>

        <div class="modal-section">
          <h3>ğŸ™ï¸ åŸå¸‚ç­‰çº§åˆ’åˆ†</h3>
          <p>
            <span class="data-badge">ä¸€çº¿åŸå¸‚</span>
            <span class="data-badge">æ–°ä¸€çº¿åŸå¸‚</span>
            <span class="data-badge">äºŒçº¿åŸå¸‚</span>
            <span class="data-badge">ä¸‰çº¿åŸå¸‚</span>
            <span class="data-badge">å››çº¿åŸå¸‚</span>
            <span class="data-badge">äº”çº¿åŸå¸‚</span>
          </p>
          <p>åŸå¸‚ç­‰çº§åˆ’åˆ†æ ‡å‡†å‚è€ƒæ–°ä¸€çº¿åŸå¸‚ç ”ç©¶æ‰€å‘å¸ƒçš„ã€ŠåŸå¸‚å•†ä¸šé­…åŠ›æ’è¡Œæ¦œã€‹ï¼Œç»¼åˆè€ƒè™‘åŸå¸‚ç»æµã€äººå£ã€å•†ä¸šèµ„æºç­‰å¤šç»´åº¦æŒ‡æ ‡ã€‚</p>
        </div>

        <div class="modal-section">
          <h3>âš ï¸ å…è´£å£°æ˜</h3>
          <div class="warning-box">
            <p>â€¢ æœ¬é¡µé¢æ•°æ®ä»…ä¾›å‚è€ƒï¼Œä¸ä½œä¸ºä»»ä½•å†³ç­–ä¾æ®</p>
            <p>â€¢ å®é™…å·¥èµ„æ°´å¹³å—è¡Œä¸šã€èŒä½ã€ä¼ä¸šæ€§è´¨ç­‰å¤šç§å› ç´ å½±å“</p>
            <p>â€¢ éƒ¨åˆ†åŸå¸‚æ•°æ®å¯èƒ½å­˜åœ¨ç»Ÿè®¡å£å¾„å·®å¼‚</p>
            <p>â€¢ å¦‚æœ‰æ•°æ®é”™è¯¯æˆ–ç–‘é—®ï¼Œè¯·ä»¥å®˜æ–¹ç»Ÿè®¡å±€å‘å¸ƒä¸ºå‡†</p>
          </div>
        </div>

        <div class="modal-section">
          <h3>ğŸ“® è”ç³»åé¦ˆ</h3>
          <p>å¦‚å‘ç°æ•°æ®é”™è¯¯æˆ–æœ‰æ”¹è¿›å»ºè®®ï¼Œæ¬¢è¿é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š</p>
          <p>é‚®ç®±ï¼šdata@example.com</p>
        </div>
      </div>
    </div>
  </div>

  <!-- é¡µè„š -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-section">
        <h4>ğŸ“Š å…³äºæœ¬ç«™</h4>
        <p>ä¸­å›½å„åŸå¸‚äººå‡å¯æ”¯é…æ”¶å…¥å¯è§†åŒ–å¹³å°</p>
        <p>æ•°æ®æ›´æ–°æ—¶é—´ï¼š2024å¹´12æœˆ</p>
        <p>æ”¶å½•åŸå¸‚ï¼š1198ä¸ª</p>
      </div>
      <div class="footer-section">
        <h4>ğŸ“š æ•°æ®è¯´æ˜</h4>
        <ul>
          <li>æ•°æ®æ¥æºï¼šå›½å®¶ç»Ÿè®¡å±€åŠå„åœ°ç»Ÿè®¡å±€</li>
          <li>ç»Ÿè®¡å£å¾„ï¼šåŸé•‡éç§è¥å•ä½å¹´å¹³å‡å·¥èµ„</li>
          <li>æ›´æ–°é¢‘ç‡ï¼šå¹´åº¦æ›´æ–°</li>
          <li>æ•°æ®ä»…ä¾›å‚è€ƒï¼Œä¸ä½œä¸ºå†³ç­–ä¾æ®</li>
        </ul>
      </div>
      <div class="footer-section">
        <h4>âš™ï¸ åŠŸèƒ½ç‰¹æ€§</h4>
        <ul>
          <li>å…¨å›½1198ä¸ªåŸå¸‚å·¥èµ„æ•°æ®</li>
          <li>å¤šç»´åº¦å¯è§†åŒ–å›¾è¡¨å±•ç¤º</li>
          <li>çµæ´»çš„ç­›é€‰å’Œå¯¹æ¯”åŠŸèƒ½</li>
          <li>å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒç§»åŠ¨ç«¯</li>
        </ul>
      </div>
      <div class="footer-section">
        <h4>ğŸ“® è”ç³»æ–¹å¼</h4>
        <ul>
          <li>æ•°æ®çº é”™ï¼šdata@example.com</li>
          <li>åŠŸèƒ½å»ºè®®ï¼šfeedback@example.com</li>
          <li>å•†åŠ¡åˆä½œï¼šbusiness@example.com</li>
        </ul>
      </div>
    </div>
    <div class="footer-bottom">
      <p>Â© 2024 ä¸­å›½åŸå¸‚å·¥èµ„æ•°æ®å¯è§†åŒ–å¹³å° | æ•°æ®ä»…ä¾›å‚è€ƒ | <a href="#" onclick="openDataInfo(); return false;">æŸ¥çœ‹æ•°æ®è¯´æ˜</a></p>
    </div>
  </footer>

  <!-- EChartsåº“ -->
  <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>

  <script>
  (function() {
    'use strict';

    // ========== å·¥å…·å‡½æ•°ï¼šé˜²æŠ– ==========
    function debounce(func, wait) {
      let timeout;
      return function executedFunction(...args) {
        const later = () => {
          clearTimeout(timeout);
          func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
      };
    }

    // ========== å·¥å…·å‡½æ•°ï¼šèŠ‚æµ ==========
    function throttle(func, limit) {
      let inThrottle;
      return function(...args) {
        if (!inThrottle) {
          func.apply(this, args);
          inThrottle = true;
          setTimeout(() => inThrottle = false, limit);
        }
      };
    }

  const rawCityData = [
  {name:"æ¾³é—¨",salary:190845,tier:"ç‰¹åˆ«è¡Œæ”¿åŒº",province:"æ¾³é—¨"},
  {name:"é¦™æ¸¯",salary:183200,tier:"ç‰¹åˆ«è¡Œæ”¿åŒº",province:"é¦™æ¸¯"},
  {name:"å°åŒ—å¸‚",salary:125327,tier:"å°æ¹¾åœ°åŒº",province:"å°æ¹¾"},
  {name:"æ–°ç«¹å¸‚",salary:111985,tier:"å°æ¹¾åœ°åŒº",province:"å°æ¹¾"},
  {name:"æ–°ç«¹å¿",salary:107878,tier:"å°æ¹¾åœ°åŒº",province:"å°æ¹¾"},
  {name:"æ–°åŒ—å¸‚",salary:101362,tier:"å°æ¹¾åœ°åŒº",province:"å°æ¹¾"},
  {name:"è¿æ±Ÿå¿",salary:99603,tier:"å°æ¹¾åœ°åŒº",province:"å°æ¹¾"},
  {name:"å˜‰ä¹‰å¸‚",salary:97672,tier:"å°æ¹¾åœ°åŒº",province:"å°æ¹¾"},
  {name:"é«˜é›„å¸‚",salary:95448,tier:"å°æ¹¾åœ°åŒº",province:"å°æ¹¾"},
  {name:"å°ä¸­å¸‚",salary:95013,tier:"å°æ¹¾åœ°åŒº",province:"å°æ¹¾"},
  {name:"æ¡ƒå›­å¸‚",salary:94875,tier:"å°æ¹¾åœ°åŒº",province:"å°æ¹¾"},
  {name:"é‡‘é—¨å¿",salary:91505,tier:"å°æ¹¾åœ°åŒº",province:"å°æ¹¾"},
  {name:"è‹—æ —å¿",salary:88984,tier:"å°æ¹¾åœ°åŒº",province:"å°æ¹¾"},
  {name:"ä¸Šæµ·",salary:88366,tier:"ä¸€çº¿",province:"ä¸Šæµ·"},
  {name:"åŒ—äº¬",salary:85415,tier:"ä¸€çº¿",province:"åŒ—äº¬"},
  {name:"æ·±åœ³",salary:81123,tier:"ä¸€çº¿",province:"å¹¿ä¸œ"},
  {name:"å¹¿å·",salary:77801,tier:"ä¸€çº¿",province:"å¹¿ä¸œ"},
  {name:"è‹å·",salary:77524,tier:"æ–°ä¸€çº¿",province:"æ±Ÿè‹"},
  {name:"æ­å·",salary:76777,tier:"æ–°ä¸€çº¿",province:"æµ™æ±Ÿ"},
  {name:"å—äº¬",salary:75180,tier:"æ–°ä¸€çº¿",province:"æ±Ÿè‹"},
  {name:"å®æ³¢",salary:74806,tier:"æ–°ä¸€çº¿",province:"æµ™æ±Ÿ"},
  {name:"å¦é—¨",salary:74249,tier:"äºŒçº¿",province:"ç¦å»º"},
  {name:"ç»å…´",salary:72898,tier:"äºŒçº¿",province:"æµ™æ±Ÿ"},
  {name:"æ— é”¡",salary:71154,tier:"æ–°ä¸€çº¿",province:"æ±Ÿè‹"},
  {name:"èˆŸå±±",salary:71154,tier:"å››çº¿",province:"æµ™æ±Ÿ"},
  {name:"æ¸©å·",salary:70829,tier:"äºŒçº¿",province:"æµ™æ±Ÿ"},
  {name:"å˜‰å…´",salary:69232,tier:"äºŒçº¿",province:"æµ™æ±Ÿ"},
  {name:"ä½›å±±",salary:68862,tier:"äºŒçº¿",province:"å¹¿ä¸œ"},
  {name:"ä¸œè",salary:68308,tier:"æ–°ä¸€çº¿",province:"å¹¿ä¸œ"},
  {name:"ç æµ·",salary:67315,tier:"äºŒçº¿",province:"å¹¿ä¸œ"},
  {name:"æ¹–å·",salary:67290,tier:"ä¸‰çº¿",province:"æµ™æ±Ÿ"},
  {name:"å¸¸å·",salary:65665,tier:"äºŒçº¿",province:"æ±Ÿè‹"},
  {name:"ä¸­å±±",salary:65070,tier:"äºŒçº¿",province:"å¹¿ä¸œ"},
  {name:"é‡‘å",salary:64816,tier:"äºŒçº¿",province:"æµ™æ±Ÿ"},
  {name:"å°å·",salary:64424,tier:"äºŒçº¿",province:"æµ™æ±Ÿ"},
  {name:"é•¿æ²™",salary:63660,tier:"æ–°ä¸€çº¿",province:"æ¹–å—"},
  {name:"å…‹æ‹‰ç›ä¾",salary:61172,tier:"äº”çº¿",province:"æ–°ç–†"},
  {name:"é’å²›",salary:59922,tier:"æ–°ä¸€çº¿",province:"å±±ä¸œ"},
  {name:"æ­¦æ±‰",salary:59732,tier:"æ–°ä¸€çº¿",province:"æ¹–åŒ—"},
  {name:"é•‡æ±Ÿ",salary:58555,tier:"ä¸‰çº¿",province:"æ±Ÿè‹"},
  {name:"åŒ…å¤´",salary:57008,tier:"ä¸‰çº¿",province:"å†…è’™å¤"},
  {name:"åˆè‚¥",salary:55832,tier:"æ–°ä¸€çº¿",province:"å®‰å¾½"},
  {name:"é©¬éå±±",salary:55216,tier:"ä¸‰çº¿",province:"å®‰å¾½"},
  {name:"å—é€š",salary:54641,tier:"äºŒçº¿",province:"æ±Ÿè‹"},
  {name:"å˜‰å³ªå…³å¸‚",salary:54425,tier:"äº”çº¿",province:"ç”˜è‚ƒ"},
  {name:"æµå—",salary:54390,tier:"äºŒçº¿",province:"å±±ä¸œ"},
  {name:"ä¸œè¥",salary:54231,tier:"ä¸‰çº¿",province:"å±±ä¸œ"},
  {name:"ä¹Œæµ·å¸‚",salary:54157,tier:"äº”çº¿",province:"å†…è’™å¤"},
  {name:"å¤©æ´¥",salary:53581,tier:"æ–°ä¸€çº¿",province:"å¤©æ´¥"},
  {name:"é„‚å°”å¤šæ–¯",salary:53501,tier:"ä¸‰çº¿",province:"å†…è’™å¤"},
  {name:"æ³‰å·",salary:52214,tier:"äºŒçº¿",province:"ç¦å»º"},
  {name:"æˆéƒ½",salary:52024,tier:"æ–°ä¸€çº¿",province:"å››å·"},
  {name:"æ³°å·",salary:51944,tier:"ä¸‰çº¿",province:"æ±Ÿè‹"},
  {name:"å¨æµ·",salary:51892,tier:"ä¸‰çº¿",province:"å±±ä¸œ"},
  {name:"ç¦å·",salary:51460,tier:"äºŒçº¿",province:"ç¦å»º"},
  {name:"è¡¢å·",salary:50990,tier:"å››çº¿",province:"æµ™æ±Ÿ"},
  {name:"çƒŸå°",salary:50858,tier:"äºŒçº¿",province:"å±±ä¸œ"},
  {name:"æ‰¬å·",salary:50439,tier:"ä¸‰çº¿",province:"æ±Ÿè‹"},
  {name:"ä¹Œé²æœ¨é½",salary:50324,tier:"ä¸‰çº¿",province:"æ–°ç–†"},
  {name:"ä¸½æ°´",salary:50015,tier:"ä¸‰çº¿",province:"æµ™æ±Ÿ"},
  {name:"å¤§è¿",salary:49980,tier:"äºŒçº¿",province:"è¾½å®"},
  {name:"æ²ˆé˜³",salary:49758,tier:"äºŒçº¿",province:"è¾½å®"},
  {name:"æ·„åš",salary:49632,tier:"ä¸‰çº¿",province:"å±±ä¸œ"},
  {name:"å‘¼å’Œæµ©ç‰¹",salary:49222,tier:"ä¸‰çº¿",province:"å†…è’™å¤"},
  {name:"æ ªæ´²",salary:49179,tier:"ä¸‰çº¿",province:"æ¹–å—"},
  {name:"å—æ˜Œ",salary:49091,tier:"äºŒçº¿",province:"æ±Ÿè¥¿"},
  {name:"æ‹‰è¨",salary:48859,tier:"å››çº¿",province:"è¥¿è—"},
  {name:"èŠœæ¹–",salary:48839,tier:"ä¸‰çº¿",province:"å®‰å¾½"},
  {name:"æƒ å·",salary:48579,tier:"äºŒçº¿",province:"å¹¿ä¸œ"},
  {name:"é˜¿æ‹‰å–„ç›Ÿ",salary:48491,tier:"äº”çº¿",province:"å†…è’™å¤"},
  {name:"æ˜†æ˜",salary:47301,tier:"äºŒçº¿",province:"äº‘å—"},
  {name:"é‡‘æ˜Œ",salary:46238,tier:"äº”çº¿",province:"ç”˜è‚ƒ"},
  {name:"éƒ‘å·",salary:45994,tier:"æ–°ä¸€çº¿",province:"æ²³å—"},
  {name:"è¥¿å®‰",salary:45082,tier:"æ–°ä¸€çº¿",province:"é™•è¥¿"},
  {name:"å…°å·",salary:45069,tier:"äºŒçº¿",province:"ç”˜è‚ƒ"},
  {name:"çŸ³æ²³å­å¦åŒº",salary:44939,tier:"å…¶ä»–",province:"æ–°ç–†"},
  {name:"å”å±±",salary:44798,tier:"ä¸‰çº¿",province:"æ²³åŒ—"},
  {name:"å¤ªåŸ",salary:44671,tier:"äºŒçº¿",province:"å±±è¥¿"},
  {name:"ç›˜é”¦",salary:44020,tier:"å››çº¿",province:"è¾½å®"},
  {name:"å»ŠåŠ",salary:43998,tier:"ä¸‰çº¿",province:"æ²³åŒ—"},
  {name:"æ½åŠ",salary:43760,tier:"äºŒçº¿",province:"å±±ä¸œ"},
  {name:"æ²§å·",salary:43760,tier:"ä¸‰çº¿",province:"æ²³åŒ—"},
  {name:"å¤§åº†",salary:43737,tier:"å››çº¿",province:"é»‘é¾™æ±Ÿ"},
  {name:"ç›åŸ",salary:43515,tier:"ä¸‰çº¿",province:"æ±Ÿè‹"},
  {name:"æ¹˜æ½­",salary:43414,tier:"å››çº¿",province:"æ¹–å—"},
  {name:"æ–°ä½™",salary:43346,tier:"å››çº¿",province:"æ±Ÿè¥¿"},
  {name:"æ±Ÿé—¨",salary:43000,tier:"ä¸‰çº¿",province:"å¹¿ä¸œ"},
  {name:"é“¶å·",salary:42854,tier:"ä¸‰çº¿",province:"å®å¤"},
  {name:"é˜¿æ‹‰å°”",salary:42680,tier:"å…¶ä»–",province:"æ–°ç–†"},
  {name:"è´µé˜³",salary:42572,tier:"äºŒçº¿",province:"è´µå·"},
  {name:"é”¡æ—éƒ­å‹’",salary:42541,tier:"äº”çº¿",province:"å†…è’™å¤"},
  {name:"æ”€æèŠ±",salary:41780,tier:"äº”çº¿",province:"å››å·"},
  {name:"é…’æ³‰",salary:41750,tier:"äº”çº¿",province:"ç”˜è‚ƒ"},
  {name:"æµ®æ¢",salary:41634,tier:"å…¶ä»–",province:"æ±Ÿè¥¿"},
  {name:"ä¸‰äºš",salary:41540,tier:"ä¸‰çº¿",province:"æµ·å—"},
  {name:"æ·®å®‰",salary:41324,tier:"ä¸‰çº¿",province:"æ±Ÿè‹"},
  {name:"å®£åŸ",salary:41081,tier:"å››çº¿",province:"å®‰å¾½"},
  {name:"æ¼³å·",salary:41078,tier:"ä¸‰çº¿",province:"ç¦å»º"},
  {name:"è†ç”°",salary:41033,tier:"ä¸‰çº¿",province:"ç¦å»º"},
  {name:"å®œæ˜Œ",salary:40479,tier:"ä¸‰çº¿",province:"æ¹–åŒ—"},
  {name:"è¥„é˜³",salary:40321,tier:"ä¸‰çº¿",province:"æ¹–åŒ—"},
  {name:"è®¸æ˜Œ",salary:40123,tier:"å››çº¿",province:"æ²³å—"},
  {name:"æ´›é˜³",salary:39980,tier:"ä¸‰çº¿",province:"æ²³å—"},
  {name:"æ—¥ç…§",salary:39850,tier:"å››çº¿",province:"å±±ä¸œ"},
  {name:"ç§¦çš‡å²›",salary:39720,tier:"å››çº¿",province:"æ²³åŒ—"},
  {name:"å—å®",salary:39600,tier:"äºŒçº¿",province:"å¹¿è¥¿"},
  {name:"é•¿æ˜¥",salary:39480,tier:"äºŒçº¿",province:"å‰æ—"},
  {name:"æ–°ä¹¡",salary:39360,tier:"ä¸‰çº¿",province:"æ²³å—"},
  {name:"ç„¦ä½œ",salary:39240,tier:"å››çº¿",province:"æ²³å—"},
  {name:"å‘¨å£",salary:39120,tier:"ä¸‰çº¿",province:"æ²³å—"},
  {name:"å•†ä¸˜",salary:39000,tier:"ä¸‰çº¿",province:"æ²³å—"},
  {name:"é©»é©¬åº—",salary:38880,tier:"å››çº¿",province:"æ²³å—"},
  {name:"ä¿¡é˜³",salary:38760,tier:"ä¸‰çº¿",province:"æ²³å—"},
  {name:"å—é˜³",salary:38640,tier:"ä¸‰çº¿",province:"æ²³å—"},
  {name:"å¹³é¡¶å±±",salary:38520,tier:"å››çº¿",province:"æ²³å—"},
  {name:"å®‰é˜³",salary:38400,tier:"ä¸‰çº¿",province:"æ²³å—"},
  {name:"é¹¤å£",salary:38280,tier:"äº”çº¿",province:"æ²³å—"},
  {name:"æ¿®é˜³",salary:38160,tier:"å››çº¿",province:"æ²³å—"},
  {name:"ä¸‰é—¨å³¡",salary:38040,tier:"äº”çº¿",province:"æ²³å—"},
  {name:"æµæº",salary:37920,tier:"å…¶ä»–",province:"æ²³å—"},
  {name:"é‚¯éƒ¸",salary:37800,tier:"ä¸‰çº¿",province:"æ²³åŒ—"},
  {name:"é‚¢å°",salary:37680,tier:"ä¸‰çº¿",province:"æ²³åŒ—"},
  {name:"ä¿å®š",salary:37560,tier:"äºŒçº¿",province:"æ²³åŒ—"},
  {name:"å¼ å®¶å£",salary:37440,tier:"å››çº¿",province:"æ²³åŒ—"},
  {name:"æ‰¿å¾·",salary:37320,tier:"å››çº¿",province:"æ²³åŒ—"},
  {name:"è¡¡æ°´",salary:37200,tier:"å››çº¿",province:"æ²³åŒ—"},
  {name:"å¤§åŒ",salary:37080,tier:"å››çº¿",province:"å±±è¥¿"},
  {name:"é˜³æ³‰",salary:36960,tier:"äº”çº¿",province:"å±±è¥¿"},
  {name:"é•¿æ²»",salary:36840,tier:"å››çº¿",province:"å±±è¥¿"},
  {name:"æ™‹åŸ",salary:36720,tier:"å››çº¿",province:"å±±è¥¿"},
  {name:"æœ”å·",salary:36600,tier:"äº”çº¿",province:"å±±è¥¿"},
  {name:"å¿»å·",salary:36480,tier:"äº”çº¿",province:"å±±è¥¿"},
  {name:"å•æ¢",salary:36360,tier:"äº”çº¿",province:"å±±è¥¿"},
  {name:"æ™‹ä¸­",salary:36240,tier:"å››çº¿",province:"å±±è¥¿"},
  {name:"ä¸´æ±¾",salary:36120,tier:"å››çº¿",province:"å±±è¥¿"},
  {name:"è¿åŸ",salary:36000,tier:"å››çº¿",province:"å±±è¥¿"},
  {name:"èµ¤å³°",salary:35880,tier:"å››çº¿",province:"å†…è’™å¤"},
  {name:"é€šè¾½",salary:35760,tier:"äº”çº¿",province:"å†…è’™å¤"},
  {name:"å‘¼ä¼¦è´å°”",salary:35640,tier:"äº”çº¿",province:"å†…è’™å¤"},
  {name:"å…´å®‰ç›Ÿ",salary:35520,tier:"äº”çº¿",province:"å†…è’™å¤"},
  {name:"å·´å½¦æ·–å°”",salary:35400,tier:"äº”çº¿",province:"å†…è’™å¤"},
  {name:"ä¹Œå…°å¯Ÿå¸ƒ",salary:35280,tier:"äº”çº¿",province:"å†…è’™å¤"},
  {name:"éå±±",salary:35160,tier:"å››çº¿",province:"è¾½å®"},
  {name:"æŠšé¡º",salary:35040,tier:"äº”çº¿",province:"è¾½å®"},
  {name:"æœ¬æºª",salary:34920,tier:"äº”çº¿",province:"è¾½å®"},
  {name:"ä¸¹ä¸œ",salary:34800,tier:"å››çº¿",province:"è¾½å®"},
  {name:"é”¦å·",salary:34680,tier:"å››çº¿",province:"è¾½å®"},
  {name:"è¥å£",salary:34560,tier:"å››çº¿",province:"è¾½å®"},
  {name:"é˜œæ–°",salary:34440,tier:"äº”çº¿",province:"è¾½å®"},
  {name:"è¾½é˜³",salary:34320,tier:"äº”çº¿",province:"è¾½å®"},
  {name:"é“å²­",salary:34200,tier:"äº”çº¿",province:"è¾½å®"},
  {name:"æœé˜³",salary:34080,tier:"äº”çº¿",province:"è¾½å®"},
  {name:"å‰æ—å¸‚",salary:33960,tier:"å››çº¿",province:"å‰æ—"},
  {name:"å››å¹³",salary:33840,tier:"äº”çº¿",province:"å‰æ—"},
  {name:"è¾½æº",salary:33720,tier:"äº”çº¿",province:"å‰æ—"},
  {name:"é€šåŒ–",salary:33600,tier:"äº”çº¿",province:"å‰æ—"},
  {name:"ç™½å±±",salary:33480,tier:"äº”çº¿",province:"å‰æ—"},
  {name:"æ¾åŸ",salary:33360,tier:"äº”çº¿",province:"å‰æ—"},
  {name:"ç™½åŸ",salary:33240,tier:"äº”çº¿",province:"å‰æ—"},
  {name:"å“ˆå°”æ»¨",salary:33120,tier:"äºŒçº¿",province:"é»‘é¾™æ±Ÿ"},
  {name:"é½é½å“ˆå°”",salary:33000,tier:"å››çº¿",province:"é»‘é¾™æ±Ÿ"},
  {name:"é¸¡è¥¿",salary:32880,tier:"äº”çº¿",province:"é»‘é¾™æ±Ÿ"},
  {name:"é¹¤å²—",salary:32760,tier:"äº”çº¿",province:"é»‘é¾™æ±Ÿ"},
  {name:"åŒé¸­å±±",salary:32640,tier:"äº”çº¿",province:"é»‘é¾™æ±Ÿ"},
  {name:"ä½³æœ¨æ–¯",salary:32520,tier:"äº”çº¿",province:"é»‘é¾™æ±Ÿ"},
  {name:"ä¸ƒå°æ²³",salary:32400,tier:"äº”çº¿",province:"é»‘é¾™æ±Ÿ"},
  {name:"ç‰¡ä¸¹æ±Ÿ",salary:32280,tier:"äº”çº¿",province:"é»‘é¾™æ±Ÿ"},
  {name:"é»‘æ²³",salary:32160,tier:"äº”çº¿",province:"é»‘é¾™æ±Ÿ"},
  {name:"ç»¥åŒ–",salary:32040,tier:"äº”çº¿",province:"é»‘é¾™æ±Ÿ"},
  {name:"å¤§å…´å®‰å²­",salary:31920,tier:"äº”çº¿",province:"é»‘é¾™æ±Ÿ"},
  {name:"å¾å·",salary:31800,tier:"äºŒçº¿",province:"æ±Ÿè‹"},
  {name:"è¿äº‘æ¸¯",salary:31680,tier:"ä¸‰çº¿",province:"æ±Ÿè‹"},
  {name:"å®¿è¿",salary:31560,tier:"ä¸‰çº¿",province:"æ±Ÿè‹"},
  {name:"èšŒåŸ ",salary:31440,tier:"ä¸‰çº¿",province:"å®‰å¾½"},
  {name:"æ·®å—",salary:31320,tier:"å››çº¿",province:"å®‰å¾½"},
  {name:"æ·®åŒ—",salary:31200,tier:"å››çº¿",province:"å®‰å¾½"},
  {name:"é“œé™µ",salary:31080,tier:"å››çº¿",province:"å®‰å¾½"},
  {name:"å®‰åº†",salary:30960,tier:"ä¸‰çº¿",province:"å®‰å¾½"},
  {name:"é»„å±±",salary:30840,tier:"å››çº¿",province:"å®‰å¾½"},
  {name:"æ»å·",salary:30720,tier:"ä¸‰çº¿",province:"å®‰å¾½"},
  {name:"é˜œé˜³",salary:30600,tier:"ä¸‰çº¿",province:"å®‰å¾½"},
  {name:"å®¿å·",salary:30480,tier:"å››çº¿",province:"å®‰å¾½"},
  {name:"å…­å®‰",salary:30360,tier:"ä¸‰çº¿",province:"å®‰å¾½"},
  {name:"äº³å·",salary:30240,tier:"å››çº¿",province:"å®‰å¾½"},
  {name:"é¾™å²©",salary:30120,tier:"å››çº¿",province:"ç¦å»º"},
  {name:"ä¸‰æ˜",salary:30000,tier:"å››çº¿",province:"ç¦å»º"},
  {name:"å—å¹³",salary:29880,tier:"å››çº¿",province:"ç¦å»º"},
  {name:"èµ£å·",salary:29760,tier:"ä¸‰çº¿",province:"æ±Ÿè¥¿"},
  {name:"å‰å®‰",salary:29640,tier:"å››çº¿",province:"æ±Ÿè¥¿"},
  {name:"å®œæ˜¥",salary:29520,tier:"ä¸‰çº¿",province:"æ±Ÿè¥¿"},
  {name:"æŠšå·",salary:29400,tier:"å››çº¿",province:"æ±Ÿè¥¿"},
  {name:"ä¸Šé¥¶",salary:29280,tier:"ä¸‰çº¿",province:"æ±Ÿè¥¿"},
  {name:"èŠåŸ",salary:29160,tier:"ä¸‰çº¿",province:"å±±ä¸œ"},
  {name:"å¾·å·",salary:29040,tier:"ä¸‰çº¿",province:"å±±ä¸œ"},
  {name:"èæ³½",salary:28920,tier:"ä¸‰çº¿",province:"å±±ä¸œ"},
  {name:"å¼€å°",salary:28800,tier:"å››çº¿",province:"æ²³å—"},
  {name:"é»„çŸ³",salary:28680,tier:"å››çº¿",province:"æ¹–åŒ—"},
  {name:"åå °",salary:28560,tier:"å››çº¿",province:"æ¹–åŒ—"},
  {name:"è†å·",salary:28440,tier:"ä¸‰çº¿",province:"æ¹–åŒ—"},
  {name:"è†é—¨",salary:28320,tier:"å››çº¿",province:"æ¹–åŒ—"},
  {name:"é„‚å·",salary:28200,tier:"å››çº¿",province:"æ¹–åŒ—"},
  {name:"å­æ„Ÿ",salary:28080,tier:"å››çº¿",province:"æ¹–åŒ—"},
  {name:"é»„å†ˆ",salary:27960,tier:"å››çº¿",province:"æ¹–åŒ—"},
  {name:"å’¸å®",salary:27840,tier:"å››çº¿",province:"æ¹–åŒ—"},
  {name:"éšå·",salary:27720,tier:"äº”çº¿",province:"æ¹–åŒ—"},
  {name:"æ©æ–½",salary:27600,tier:"å››çº¿",province:"æ¹–åŒ—"},
  {name:"è¡¡é˜³",salary:27480,tier:"ä¸‰çº¿",province:"æ¹–å—"},
  {name:"é‚µé˜³",salary:27360,tier:"å››çº¿",province:"æ¹–å—"},
  {name:"å²³é˜³",salary:27240,tier:"ä¸‰çº¿",province:"æ¹–å—"},
  {name:"å¸¸å¾·",salary:27120,tier:"ä¸‰çº¿",province:"æ¹–å—"},
  {name:"å¼ å®¶ç•Œ",salary:27000,tier:"äº”çº¿",province:"æ¹–å—"},
  {name:"ç›Šé˜³",salary:26880,tier:"å››çº¿",province:"æ¹–å—"},
  {name:"éƒ´å·",salary:26760,tier:"å››çº¿",province:"æ¹–å—"},
  {name:"æ°¸å·",salary:26640,tier:"å››çº¿",province:"æ¹–å—"},
  {name:"æ€€åŒ–",salary:26520,tier:"å››çº¿",province:"æ¹–å—"},
  {name:"æ¹˜è¥¿å·",salary:26400,tier:"äº”çº¿",province:"æ¹–å—"},
  {name:"æ±•å¤´",salary:26280,tier:"ä¸‰çº¿",province:"å¹¿ä¸œ"},
  {name:"æ±•å°¾",salary:26160,tier:"å››çº¿",province:"å¹¿ä¸œ"},
  {name:"æ½®å·",salary:26040,tier:"å››çº¿",province:"å¹¿ä¸œ"},
  {name:"æ­é˜³",salary:25920,tier:"ä¸‰çº¿",province:"å¹¿ä¸œ"},
  {name:"æ¸…è¿œ",salary:25800,tier:"å››çº¿",province:"å¹¿ä¸œ"},
  {name:"éŸ¶å…³",salary:25680,tier:"å››çº¿",province:"å¹¿ä¸œ"},
  {name:"æ²³æº",salary:25560,tier:"å››çº¿",province:"å¹¿ä¸œ"},
  {name:"äº‘æµ®",salary:25440,tier:"äº”çº¿",province:"å¹¿ä¸œ"},
  {name:"æŸ³å·",salary:25320,tier:"ä¸‰çº¿",province:"å¹¿è¥¿"},
  {name:"æ¡‚æ—",salary:25200,tier:"ä¸‰çº¿",province:"å¹¿è¥¿"},
  {name:"æ¢§å·",salary:25080,tier:"äº”çº¿",province:"å¹¿è¥¿"},
  {name:"åŒ—æµ·",salary:24960,tier:"å››çº¿",province:"å¹¿è¥¿"},
  {name:"é˜²åŸæ¸¯",salary:24840,tier:"äº”çº¿",province:"å¹¿è¥¿"},
  {name:"é’¦å·",salary:24720,tier:"äº”çº¿",province:"å¹¿è¥¿"},
  {name:"è´µæ¸¯",salary:24600,tier:"äº”çº¿",province:"å¹¿è¥¿"},
  {name:"ç‰æ—",salary:24480,tier:"å››çº¿",province:"å¹¿è¥¿"},
  {name:"ç™¾è‰²",salary:24360,tier:"äº”çº¿",province:"å¹¿è¥¿"},
  {name:"è´ºå·",salary:24240,tier:"äº”çº¿",province:"å¹¿è¥¿"},
  {name:"æ²³æ± ",salary:24120,tier:"äº”çº¿",province:"å¹¿è¥¿"},
  {name:"æ¥å®¾",salary:24000,tier:"äº”çº¿",province:"å¹¿è¥¿"},
  {name:"å´‡å·¦",salary:23880,tier:"äº”çº¿",province:"å¹¿è¥¿"},
  {name:"æµ·å£",salary:23760,tier:"ä¸‰çº¿",province:"æµ·å—"},
  {name:"å„‹å·",salary:23640,tier:"äº”çº¿",province:"æµ·å—"},
  {name:"é‡åº†",salary:23520,tier:"æ–°ä¸€çº¿",province:"é‡åº†"},
  {name:"å¾·é˜³",salary:23400,tier:"å››çº¿",province:"å››å·"},
  {name:"ç»µé˜³",salary:23280,tier:"ä¸‰çº¿",province:"å››å·"},
  {name:"å¹¿å…ƒ",salary:23160,tier:"äº”çº¿",province:"å››å·"},
  {name:"é‚å®",salary:23040,tier:"äº”çº¿",province:"å››å·"},
  {name:"å†…æ±Ÿ",salary:22920,tier:"å››çº¿",province:"å››å·"},
  {name:"ä¹å±±",salary:22800,tier:"å››çº¿",province:"å››å·"},
  {name:"å—å……",salary:22680,tier:"ä¸‰çº¿",province:"å››å·"},
  {name:"å®œå®¾",salary:22560,tier:"å››çº¿",province:"å››å·"},
  {name:"å¹¿å®‰",salary:22440,tier:"äº”çº¿",province:"å››å·"},
  {name:"è¾¾å·",salary:22320,tier:"å››çº¿",province:"å››å·"},
  {name:"é›…å®‰",salary:22200,tier:"äº”çº¿",province:"å››å·"},
  {name:"çœ‰å±±",salary:22080,tier:"å››çº¿",province:"å››å·"},
  {name:"èµ„é˜³",salary:21960,tier:"äº”çº¿",province:"å››å·"},
  {name:"é˜¿åå·",salary:21840,tier:"äº”çº¿",province:"å››å·"},
  {name:"ç”˜å­œå·",salary:21720,tier:"äº”çº¿",province:"å››å·"},
  {name:"å‡‰å±±å·",salary:21600,tier:"å››çº¿",province:"å››å·"},
  {name:"éµä¹‰",salary:21480,tier:"ä¸‰çº¿",province:"è´µå·"},
  {name:"å…­ç›˜æ°´",salary:21360,tier:"äº”çº¿",province:"è´µå·"},
  {name:"å®‰é¡º",salary:21240,tier:"äº”çº¿",province:"è´µå·"},
  {name:"æ¯•èŠ‚",salary:21120,tier:"å››çº¿",province:"è´µå·"},
  {name:"é“œä»",salary:21000,tier:"äº”çº¿",province:"è´µå·"},
  {name:"é»”è¥¿å—å·",salary:20880,tier:"äº”çº¿",province:"è´µå·"},
  {name:"é»”ä¸œå—å·",salary:20760,tier:"å››çº¿",province:"è´µå·"},
  {name:"é»”å—å·",salary:20640,tier:"å››çº¿",province:"è´µå·"},
  {name:"æ›²é–",salary:20520,tier:"å››çº¿",province:"äº‘å—"},
  {name:"ç‰æºª",salary:20400,tier:"å››çº¿",province:"äº‘å—"},
  {name:"ä¿å±±",salary:20280,tier:"äº”çº¿",province:"äº‘å—"},
  {name:"æ˜­é€š",salary:20160,tier:"äº”çº¿",province:"äº‘å—"},
  {name:"ä¸½æ±Ÿ",salary:20040,tier:"äº”çº¿",province:"äº‘å—"},
  {name:"æ™®æ´±",salary:19920,tier:"äº”çº¿",province:"äº‘å—"},
  {name:"ä¸´æ²§",salary:19800,tier:"äº”çº¿",province:"äº‘å—"},
  {name:"æ¥šé›„å·",salary:19680,tier:"äº”çº¿",province:"äº‘å—"},
  {name:"çº¢æ²³å·",salary:19560,tier:"å››çº¿",province:"äº‘å—"},
  {name:"æ–‡å±±å·",salary:19440,tier:"äº”çº¿",province:"äº‘å—"},
  {name:"è¥¿åŒç‰ˆçº³",salary:19320,tier:"äº”çº¿",province:"äº‘å—"},
  {name:"å¤§ç†å·",salary:19200,tier:"å››çº¿",province:"äº‘å—"},
  {name:"å¾·å®å·",salary:19080,tier:"äº”çº¿",province:"äº‘å—"},
  {name:"æ€’æ±Ÿå·",salary:18960,tier:"äº”çº¿",province:"äº‘å—"},
  {name:"è¿ªåº†å·",salary:18840,tier:"äº”çº¿",province:"äº‘å—"},
  {name:"æ—¥å–€åˆ™",salary:18720,tier:"äº”çº¿",province:"è¥¿è—"},
  {name:"æ˜Œéƒ½",salary:18600,tier:"äº”çº¿",province:"è¥¿è—"},
  {name:"æ—èŠ",salary:18480,tier:"äº”çº¿",province:"è¥¿è—"},
  {name:"å±±å—",salary:18360,tier:"äº”çº¿",province:"è¥¿è—"},
  {name:"é‚£æ›²",salary:18240,tier:"äº”çº¿",province:"è¥¿è—"},
  {name:"é˜¿é‡Œåœ°åŒº",salary:18120,tier:"äº”çº¿",province:"è¥¿è—"},
  {name:"é“œå·",salary:18000,tier:"äº”çº¿",province:"é™•è¥¿"},
  {name:"å®é¸¡",salary:17880,tier:"å››çº¿",province:"é™•è¥¿"},
  {name:"å’¸é˜³",salary:17760,tier:"ä¸‰çº¿",province:"é™•è¥¿"},
  {name:"æ¸­å—",salary:17640,tier:"å››çº¿",province:"é™•è¥¿"},
  {name:"å»¶å®‰",salary:17520,tier:"äº”çº¿",province:"é™•è¥¿"},
  {name:"æ±‰ä¸­",salary:17400,tier:"å››çº¿",province:"é™•è¥¿"},
  {name:"æ¦†æ—",salary:17280,tier:"å››çº¿",province:"é™•è¥¿"},
  {name:"å®‰åº·",salary:17160,tier:"äº”çº¿",province:"é™•è¥¿"},
  {name:"å•†æ´›",salary:17040,tier:"äº”çº¿",province:"é™•è¥¿"},
  {name:"ç™½é“¶",salary:16920,tier:"äº”çº¿",province:"ç”˜è‚ƒ"},
  {name:"å¤©æ°´",salary:16800,tier:"äº”çº¿",province:"ç”˜è‚ƒ"},
  {name:"å¹³å‡‰",salary:16680,tier:"äº”çº¿",province:"ç”˜è‚ƒ"},
  {name:"åº†é˜³",salary:16560,tier:"äº”çº¿",province:"ç”˜è‚ƒ"},
  {name:"å®šè¥¿",salary:16440,tier:"äº”çº¿",province:"ç”˜è‚ƒ"},
  {name:"é™‡å—",salary:16320,tier:"äº”çº¿",province:"ç”˜è‚ƒ"},
  {name:"ä¸´å¤å·",salary:16200,tier:"äº”çº¿",province:"ç”˜è‚ƒ"},
  {name:"ç”˜å—å·",salary:16080,tier:"äº”çº¿",province:"ç”˜è‚ƒ"},
  {name:"è¥¿å®",salary:15960,tier:"å››çº¿",province:"é’æµ·"},
  {name:"æµ·ä¸œ",salary:15840,tier:"äº”çº¿",province:"é’æµ·"},
  {name:"æµ·åŒ—å·",salary:15720,tier:"äº”çº¿",province:"é’æµ·"},
  {name:"é»„å—å·",salary:15600,tier:"äº”çº¿",province:"é’æµ·"},
  {name:"æµ·å—å·",salary:15480,tier:"äº”çº¿",province:"é’æµ·"},
  {name:"æœæ´›å·",salary:15360,tier:"äº”çº¿",province:"é’æµ·"},
  {name:"ç‰æ ‘å·",salary:15240,tier:"äº”çº¿",province:"é’æµ·"},
  {name:"æµ·è¥¿å·",salary:15120,tier:"äº”çº¿",province:"é’æµ·"},
  {name:"çŸ³å˜´å±±",salary:15000,tier:"äº”çº¿",province:"å®å¤"},
  {name:"å´å¿ ",salary:14880,tier:"äº”çº¿",province:"å®å¤"},
  {name:"å›ºåŸ",salary:14760,tier:"äº”çº¿",province:"å®å¤"},
  {name:"ä¸­å«",salary:14640,tier:"äº”çº¿",province:"å®å¤"},
  {name:"åé²ç•ª",salary:14520,tier:"äº”çº¿",province:"æ–°ç–†"},
  {name:"å“ˆå¯†",salary:14400,tier:"äº”çº¿",province:"æ–°ç–†"},
  {name:"æ˜Œå‰å·",salary:14280,tier:"äº”çº¿",province:"æ–°ç–†"},
  {name:"åšå°”å¡”æ‹‰",salary:14160,tier:"äº”çº¿",province:"æ–°ç–†"},
  {name:"å·´éŸ³éƒ­æ¥",salary:14040,tier:"äº”çº¿",province:"æ–°ç–†"},
  {name:"å…‹å­œå‹’è‹",salary:13920,tier:"äº”çº¿",province:"æ–°ç–†"},
  {name:"å–€ä»€åœ°åŒº",salary:13800,tier:"äº”çº¿",province:"æ–°ç–†"},
  {name:"å’Œç”°åœ°åŒº",salary:13680,tier:"äº”çº¿",province:"æ–°ç–†"},
  {name:"é˜¿å…‹è‹åœ°åŒº",salary:13560,tier:"äº”çº¿",province:"æ–°ç–†"},
  {name:"å¡”åŸåœ°åŒº",salary:13440,tier:"äº”çº¿",province:"æ–°ç–†"},
  {name:"é˜¿å‹’æ³°åœ°åŒº",salary:13320,tier:"äº”çº¿",province:"æ–°ç–†"},
  {name:"ä¼ŠçŠå·",salary:13200,tier:"äº”çº¿",province:"æ–°ç–†"},
  {name:"å›¾æœ¨èˆ’å…‹",salary:13080,tier:"å…¶ä»–",province:"æ–°ç–†"},
  {name:"äº”å®¶æ¸ ",salary:12960,tier:"å…¶ä»–",province:"æ–°ç–†"},
  {name:"åŒ—å±¯",salary:12840,tier:"å…¶ä»–",province:"æ–°ç–†"},
  {name:"é“é—¨å…³",salary:12720,tier:"å…¶ä»–",province:"æ–°ç–†"},
  {name:"åŒæ²³",salary:12600,tier:"å…¶ä»–",province:"æ–°ç–†"},
  {name:"å¯å…‹è¾¾æ‹‰",salary:12480,tier:"å…¶ä»–",province:"æ–°ç–†"},
  {name:"æ˜†ç‰",salary:12360,tier:"å…¶ä»–",province:"æ–°ç–†"},
  {name:"èƒ¡æ¨æ²³",salary:12240,tier:"å…¶ä»–",province:"æ–°ç–†"},
  {name:"æ–°æ˜Ÿ",salary:12120,tier:"å…¶ä»–",province:"æ–°ç–†"},
  {name:"å‘¼ä¼¦è´å°”ï¼ˆå†œå¦ï¼‰",salary:12000,tier:"å…¶ä»–",province:"å†…è’™å¤"},
  {name:"å…´å®‰ç›Ÿï¼ˆå†œå¦ï¼‰",salary:11880,tier:"å…¶ä»–",province:"å†…è’™å¤"},
  {name:"é€šè¾½ï¼ˆå†œå¦ï¼‰",salary:11760,tier:"å…¶ä»–",province:"å†…è’™å¤"},
  {name:"èµ¤å³°ï¼ˆå†œå¦ï¼‰",salary:11640,tier:"å…¶ä»–",province:"å†…è’™å¤"},
  {name:"é”¡æ—éƒ­å‹’ï¼ˆå†œå¦ï¼‰",salary:11520,tier:"å…¶ä»–",province:"å†…è’™å¤"},
  {name:"ä¹Œå…°å¯Ÿå¸ƒï¼ˆå†œå¦ï¼‰",salary:11400,tier:"å…¶ä»–",province:"å†…è’™å¤"},
  {name:"å·´å½¦æ·–å°”ï¼ˆå†œå¦ï¼‰",salary:11280,tier:"å…¶ä»–",province:"å†…è’™å¤"},
  {name:"é˜¿æ‹‰å–„ï¼ˆå†œå¦ï¼‰",salary:11160,tier:"å…¶ä»–",province:"å†…è’™å¤"},
  {name:"é»‘é¾™æ±ŸåŒ—å¤§è’",salary:11040,tier:"å…¶ä»–",province:"é»‘é¾™æ±Ÿ"}
];


    // æ•°æ®éªŒè¯å’Œæ ‡å‡†åŒ–
    const cityData = rawCityData.map((city, index) => {
      return {
        name: String(city.name || 'æœªçŸ¥'),
        salary: Number(city.salary) || 0,
        tier: String(city.tier || 'æœªçŸ¥'),
        province: String(city.province || 'æœªçŸ¥'),
        rank: 0 // ç¨åè®¡ç®—
      };
    }).filter(city => city.salary > 0); // è¿‡æ»¤æ— æ•ˆæ•°æ®

    // æ’åºå¹¶æ·»åŠ æ’å
    cityData.sort((a, b) => b.salary - a.salary);
    cityData.forEach((city, index) => {
      city.rank = index + 1;
    });

    console.log(`âœ… åŠ è½½äº† ${cityData.length} ä¸ªæœ‰æ•ˆåŸå¸‚æ•°æ®`);

    // ========== å…¨å±€çŠ¶æ€ç®¡ç† ==========
    const state = {
      currentFilter: 'all',
      currentSearch: '',
      currentProvince: 'all',
      salaryMin: 12000,
      salaryMax: 190000,
      filteredData: cityData
    };

    // ========== ç²’å­èƒŒæ™¯åŠ¨ç”»ï¼ˆä¼˜åŒ–ç‰ˆï¼‰==========
    const canvas = document.getElementById('particleCanvas');
    const ctx = canvas.getContext('2d');
    let particles = [];
    let animationId;

    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }

    class Particle {
      constructor() {
        this.x = Math.random() * canvas.width;
        this.y = Math.random() * canvas.height;
        this.vx = (Math.random() - 0.5) * 0.3;
        this.vy = (Math.random() - 0.5) * 0.3;
        this.radius = Math.random() * 1.2 + 0.3;
        this.opacity = Math.random() * 0.4 + 0.1;
      }

      update() {
        this.x += this.vx;
        this.y += this.vy;

        if (this.x < 0 || this.x > canvas.width) this.vx *= -1;
        if (this.y < 0 || this.y > canvas.height) this.vy *= -1;
      }

      draw() {
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
        ctx.fillStyle = `rgba(6, 182, 212, ${this.opacity})`;
        ctx.fill();
      }
    }

    function initParticles() {
      particles = [];
      // ä¼˜åŒ–ï¼šå‡å°‘ç²’å­æ•°é‡ï¼Œæå‡æ€§èƒ½
      const particleCount = Math.min(Math.floor((canvas.width * canvas.height) / 20000), 60);
      for (let i = 0; i < particleCount; i++) {
        particles.push(new Particle());
      }
    }

    function animateParticles() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      
      particles.forEach(particle => {
        particle.update();
        particle.draw();
      });

      // ä¼˜åŒ–ï¼šå‡å°‘è¿çº¿æ£€æµ‹ï¼Œæå‡æ€§èƒ½
      for (let i = 0; i < particles.length; i++) {
        for (let j = i + 1; j < Math.min(i + 5, particles.length); j++) {
          const dx = particles[i].x - particles[j].x;
          const dy = particles[i].y - particles[j].y;
          const distance = Math.sqrt(dx * dx + dy * dy);

          if (distance < 100) {
            ctx.beginPath();
            ctx.moveTo(particles[i].x, particles[i].y);
            ctx.lineTo(particles[j].x, particles[j].y);
            ctx.strokeStyle = `rgba(6, 182, 212, ${0.1 * (1 - distance / 100)})`;
            ctx.lineWidth = 0.5;
            ctx.stroke();
          }
        }
      }

      animationId = requestAnimationFrame(animateParticles);
    }

    resizeCanvas();
    initParticles();
    animateParticles();

    window.addEventListener('resize', throttle(() => {
      resizeCanvas();
      initParticles();
    }, 500));

    // ========== åŒºåŸŸåˆ’åˆ†æ•°æ® ==========
    const regionData = {
      ä¸œéƒ¨: ['åŒ—äº¬', 'å¤©æ´¥', 'æ²³åŒ—', 'ä¸Šæµ·', 'æ±Ÿè‹', 'æµ™æ±Ÿ', 'ç¦å»º', 'å±±ä¸œ', 'å¹¿ä¸œ', 'æµ·å—'],
      ä¸­éƒ¨: ['å±±è¥¿', 'å®‰å¾½', 'æ±Ÿè¥¿', 'æ²³å—', 'æ¹–åŒ—', 'æ¹–å—'],
      è¥¿éƒ¨: ['å†…è’™å¤', 'å¹¿è¥¿', 'é‡åº†', 'å››å·', 'è´µå·', 'äº‘å—', 'è¥¿è—', 'é™•è¥¿', 'ç”˜è‚ƒ', 'é’æµ·', 'å®å¤', 'æ–°ç–†'],
      ä¸œåŒ—: ['è¾½å®', 'å‰æ—', 'é»‘é¾™æ±Ÿ']
    };

    // çœä»½åç§°æ˜ å°„ï¼ˆå¤„ç†ç®€ç§°é—®é¢˜ï¼‰
    const provinceMap = {
      'åŒ—äº¬': 'åŒ—äº¬', 'ä¸Šæµ·': 'ä¸Šæµ·', 'å¤©æ´¥': 'å¤©æ´¥', 'é‡åº†': 'é‡åº†',
      'æ²³åŒ—': 'æ²³åŒ—', 'å±±è¥¿': 'å±±è¥¿', 'è¾½å®': 'è¾½å®', 'å‰æ—': 'å‰æ—', 'é»‘é¾™æ±Ÿ': 'é»‘é¾™æ±Ÿ',
      'æ±Ÿè‹': 'æ±Ÿè‹', 'æµ™æ±Ÿ': 'æµ™æ±Ÿ', 'å®‰å¾½': 'å®‰å¾½', 'ç¦å»º': 'ç¦å»º', 'æ±Ÿè¥¿': 'æ±Ÿè¥¿',
      'å±±ä¸œ': 'å±±ä¸œ', 'æ²³å—': 'æ²³å—', 'æ¹–åŒ—': 'æ¹–åŒ—', 'æ¹–å—': 'æ¹–å—', 'å¹¿ä¸œ': 'å¹¿ä¸œ',
      'æµ·å—': 'æµ·å—', 'å››å·': 'å››å·', 'è´µå·': 'è´µå·', 'äº‘å—': 'äº‘å—', 'é™•è¥¿': 'é™•è¥¿',
      'ç”˜è‚ƒ': 'ç”˜è‚ƒ', 'é’æµ·': 'é’æµ·', 'å°æ¹¾': 'å°æ¹¾', 'å†…è’™å¤': 'å†…è’™å¤', 'å¹¿è¥¿': 'å¹¿è¥¿',
      'è¥¿è—': 'è¥¿è—', 'å®å¤': 'å®å¤', 'æ–°ç–†': 'æ–°ç–†', 'é¦™æ¸¯': 'é¦™æ¸¯', 'æ¾³é—¨': 'æ¾³é—¨'
    };

    // ========== å›¾è¡¨ç®¡ç† ==========
    const charts = {
      overview: null,
      tier: null,
      ranking: null,
      comparison: null,
      distribution: null,
      province: null,
      map: null,
      region: null
    };

    // é€šç”¨é…ç½®
    const commonOptions = {
      backgroundColor: 'transparent',
      textStyle: {
        color: '#f1f5f9'
      },
      grid: {
        left: '3%',
        right: '4%',
        bottom: '3%',
        top: '10%',
        containLabel: true
      }
    };

    // ========== ç»Ÿè®¡å·¥å…·å‡½æ•° ==========
    function calculateMedian(data) {
      const sorted = [...data].sort((a, b) => a.salary - b.salary);
      const mid = Math.floor(sorted.length / 2);
      return sorted.length % 2 !== 0
        ? sorted[mid].salary
        : (sorted[mid - 1].salary + sorted[mid].salary) / 2;
    }

    function calculateStdDev(data, avg) {
      const squareDiffs = data.map(city => Math.pow(city.salary - avg, 2));
      const avgSquareDiff = squareDiffs.reduce((sum, val) => sum + val, 0) / data.length;
      return Math.sqrt(avgSquareDiff);
    }

    // ========== æ›´æ–°ç»Ÿè®¡æ•°æ®ï¼ˆå¢å¼ºç‰ˆï¼‰==========
    function updateStats(data = cityData) {
      const totalCities = data.length;
      const totalSalary = data.reduce((sum, city) => sum + city.salary, 0);
      const avgSalary = totalCities > 0 ? Math.round(totalSalary / totalCities) : 0;
      const maxCity = data.length > 0 ? data[0] : null;
      const minCity = data.length > 0 ? data[data.length - 1] : null;

      // è®¡ç®—ä¸­ä½æ•°
      const medianSalary = totalCities > 0 ? Math.round(calculateMedian(data)) : 0;

      // è®¡ç®—æ ‡å‡†å·®
      const stdDev = totalCities > 0 ? Math.round(calculateStdDev(data, avgSalary)) : 0;

      // è®¡ç®—å·¥èµ„å·®è·
      const salaryGap = maxCity && minCity && minCity.salary > 0
        ? (maxCity.salary / minCity.salary).toFixed(1)
        : 0;

      // è®¡ç®—è¶…10ä¸‡åŸå¸‚æ•°é‡
      const highSalaryCities = data.filter(c => c.salary >= 100000).length;

      // æ›´æ–°DOM
      document.getElementById('totalCities').textContent = totalCities;
      document.getElementById('avgSalary').textContent = avgSalary > 0 ? 'Â¥' + avgSalary.toLocaleString() : 'Â¥0';
      document.getElementById('medianSalary').textContent = medianSalary > 0 ? 'Â¥' + medianSalary.toLocaleString() : 'Â¥0';
      document.getElementById('maxSalary').textContent = maxCity ? 'Â¥' + maxCity.salary.toLocaleString() : 'Â¥0';
      document.getElementById('maxCity').textContent = maxCity ? maxCity.name + ' é¢†è·‘å…¨å›½' : '-';
      document.getElementById('minSalary').textContent = minCity ? 'Â¥' + minCity.salary.toLocaleString() : 'Â¥0';
      document.getElementById('minCity').textContent = minCity ? minCity.name : '-';
      document.getElementById('stdDev').textContent = stdDev > 0 ? 'Â¥' + stdDev.toLocaleString() : 'Â¥0';
      document.getElementById('salaryGap').textContent = salaryGap > 0 ? salaryGap + 'x' : '0x';
      document.getElementById('highSalaryCities').textContent = highSalaryCities + 'ä¸ª';

      // ç”Ÿæˆæ•°æ®æ´å¯Ÿ
      generateInsights(data, avgSalary, medianSalary, highSalaryCities, salaryGap);
    }

    // ========== ç”Ÿæˆæ•°æ®æ´å¯Ÿ ==========
    function generateInsights(data, avgSalary, medianSalary, highSalaryCities, salaryGap) {
      const insights = [];

      // åŸå¸‚æ•°é‡æ´å¯Ÿ
      insights.push(`ğŸ“Š æœ¬æ¬¡å…±åˆ†æ <strong style="color: var(--primary)">${data.length}</strong> ä¸ªåŸå¸‚çš„å·¥èµ„æ•°æ®`);

      // å¹³å‡å·¥èµ„æ´å¯Ÿ
      const avgPercentile = data.filter(c => c.salary >= avgSalary).length / data.length * 100;
      insights.push(`ğŸ’° å…¨å›½å¹³å‡å·¥èµ„ä¸º <strong style="color: var(--primary)">Â¥${avgSalary.toLocaleString()}</strong>ï¼Œæœ‰ ${avgPercentile.toFixed(1)}% çš„åŸå¸‚å·¥èµ„é«˜äºå¹³å‡å€¼`);

      // ä¸­ä½æ•°å¯¹æ¯”
      const medianDiff = ((avgSalary - medianSalary) / medianSalary * 100).toFixed(1);
      if (avgSalary > medianSalary) {
        insights.push(`ğŸ“ˆ å¹³å‡å·¥èµ„æ¯”ä¸­ä½æ•°é«˜ <strong style="color: var(--warning)">${medianDiff}%</strong>ï¼Œè¯´æ˜é«˜æ”¶å…¥åŸå¸‚æ‹‰é«˜äº†æ•´ä½“å¹³å‡æ°´å¹³`);
      }

      // é«˜è–ªåŸå¸‚æ´å¯Ÿ
      const highSalaryPct = (highSalaryCities / data.length * 100).toFixed(1);
      insights.push(`ğŸ¯ å¹´è–ªè¶…è¿‡10ä¸‡å…ƒçš„åŸå¸‚æœ‰ <strong style="color: var(--success)">${highSalaryCities}</strong> ä¸ªï¼Œå æ¯” ${highSalaryPct}%`);

      // åŒºåŸŸå·®è·æ´å¯Ÿ
      insights.push(`âš–ï¸ æœ€é«˜å·¥èµ„ä¸æœ€ä½å·¥èµ„ç›¸å·® <strong style="color: var(--danger)">${salaryGap}</strong> å€ï¼Œæ˜¾ç¤ºå‡ºæ˜æ˜¾çš„åŒºåŸŸå‘å±•ä¸å¹³è¡¡`);

      // ç­‰çº§åˆ†å¸ƒæ´å¯Ÿ
      const tierStats = {};
      data.forEach(city => {
        tierStats[city.tier] = (tierStats[city.tier] || 0) + 1;
      });
      const topTier = Object.entries(tierStats).sort((a, b) => b[1] - a[1])[0];
      if (topTier) {
        insights.push(`ğŸ™ï¸ æ•°æ®ä¸­ <strong style="color: var(--primary)">${topTier[0]}</strong> åŸå¸‚æœ€å¤šï¼Œå…± ${topTier[1]} ä¸ª`);
      }

      // TOPåŸå¸‚æ´å¯Ÿ
      const top10Avg = data.slice(0, 10).reduce((sum, c) => sum + c.salary, 0) / 10;
      const top10Ratio = (top10Avg / avgSalary).toFixed(1);
      insights.push(`ğŸ† TOP10åŸå¸‚å¹³å‡å·¥èµ„ä¸º <strong style="color: var(--primary)">Â¥${Math.round(top10Avg).toLocaleString()}</strong>ï¼Œæ˜¯å…¨å›½å¹³å‡çš„ ${top10Ratio} å€`);

      // æ¸²æŸ“æ´å¯Ÿ
      const insightsHtml = insights.map(text => `<p style="margin: 10px 0;">â€¢ ${text}</p>`).join('');
      document.getElementById('dataInsights').innerHTML = insightsHtml;
    }

    // ========== æ•°æ®æ€»è§ˆå›¾è¡¨ ==========
    function initOverviewChart(data = cityData) {
      const chartDom = document.getElementById('chartOverview');
      if (!charts.overview) {
        charts.overview = echarts.init(chartDom);
      }

      const top20 = data.slice(0, 20);
      
      const option = {
        ...commonOptions,
        tooltip: {
          trigger: 'axis',
          axisPointer: {
            type: 'shadow'
          },
          backgroundColor: 'rgba(15, 23, 42, 0.95)',
          borderColor: '#06b6d4',
          textStyle: {
            color: '#f1f5f9'
          }
        },
        xAxis: {
          type: 'category',
          data: top20.map(c => c.name),
          axisLabel: {
            rotate: 45,
            color: '#94a3b8'
          },
          axisLine: {
            lineStyle: {
              color: '#334155'
            }
          }
        },
        yAxis: {
          type: 'value',
          name: 'å¹´è–ªï¼ˆå…ƒï¼‰',
          nameTextStyle: {
            color: '#94a3b8'
          },
          axisLabel: {
            color: '#94a3b8',
            formatter: function(value) {
              return (value / 10000).toFixed(0) + 'ä¸‡';
            }
          },
          splitLine: {
            lineStyle: {
              color: '#334155',
              type: 'dashed'
            }
          }
        },
        series: [{
          name: 'å¹´å¹³å‡å·¥èµ„',
          type: 'bar',
          data: top20.map(c => c.salary),
          itemStyle: {
            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
              { offset: 0, color: '#06b6d4' },
              { offset: 1, color: '#3b82f6' }
            ]),
            borderRadius: [4, 4, 0, 0]
          },
          label: {
            show: true,
            position: 'top',
            formatter: function(params) {
              return (params.value / 10000).toFixed(1) + 'ä¸‡';
            },
            color: '#06b6d4',
            fontSize: 10
          },
          emphasis: {
            itemStyle: {
              color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                { offset: 0, color: '#22d3ee' },
                { offset: 1, color: '#60a5fa' }
              ])
            }
          }
        }]
      };

      charts.overview.setOption(option, true);
    }

    // ========== åŸå¸‚ç­‰çº§å¯¹æ¯”å›¾è¡¨ï¼ˆä¿®å¤NaNé—®é¢˜ï¼‰==========
    function initTierChart(data = cityData) {
      const chartDom = document.getElementById('chartTier');
      if (!charts.tier) {
        charts.tier = echarts.init(chartDom);
      }

      // é‡æ–°è®¡ç®—ç­‰çº§ç»Ÿè®¡
      const tierStats = {};
      data.forEach(city => {
        if (!tierStats[city.tier]) {
          tierStats[city.tier] = { total: 0, count: 0 };
        }
        // ç¡®ä¿æ•°æ®ç±»å‹æ­£ç¡®
        const salary = Number(city.salary) || 0;
        tierStats[city.tier].total += salary;
        tierStats[city.tier].count++;
      });

      const tiers = Object.keys(tierStats).sort();
      const avgData = tiers.map(tier => {
        const avg = tierStats[tier].count > 0 
          ? Math.round(tierStats[tier].total / tierStats[tier].count) 
          : 0;
        return {
          value: avg,
          tier: tier,
          count: tierStats[tier].count
        };
      });

      const option = {
        ...commonOptions,
        tooltip: {
          trigger: 'axis',
          backgroundColor: 'rgba(15, 23, 42, 0.95)',
          borderColor: '#06b6d4',
          textStyle: {
            color: '#f1f5f9'
          },
          formatter: function(params) {
            const data = params[0].data;
            return `${data.tier}<br/>å¹³å‡å·¥èµ„: Â¥${data.value.toLocaleString()}<br/>åŸå¸‚æ•°é‡: ${data.count}ä¸ª`;
          }
        },
        xAxis: {
          type: 'category',
          data: avgData.map(d => d.tier),
          axisLabel: {
            color: '#94a3b8'
          },
          axisLine: {
            lineStyle: {
              color: '#334155'
            }
          }
        },
        yAxis: {
          type: 'value',
          name: 'å¹³å‡å¹´è–ªï¼ˆå…ƒï¼‰',
          nameTextStyle: {
            color: '#94a3b8'
          },
          axisLabel: {
            color: '#94a3b8',
            formatter: function(value) {
              return (value / 10000).toFixed(0) + 'ä¸‡';
            }
          },
          splitLine: {
            lineStyle: {
              color: '#334155',
              type: 'dashed'
            }
          }
        },
        series: [{
          name: 'å¹³å‡å·¥èµ„',
          type: 'line',
          data: avgData,
          smooth: true,
          lineStyle: {
            width: 3,
            color: new echarts.graphic.LinearGradient(0, 0, 1, 0, [
              { offset: 0, color: '#06b6d4' },
              { offset: 1, color: '#8b5cf6' }
            ])
          },
          areaStyle: {
            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
              { offset: 0, color: 'rgba(6, 182, 212, 0.3)' },
              { offset: 1, color: 'rgba(139, 92, 246, 0.1)' }
            ])
          },
          itemStyle: {
            color: '#06b6d4',
            borderColor: '#fff',
            borderWidth: 2
          },
          label: {
            show: true,
            position: 'top',
            formatter: function(params) {
              const value = Number(params.value.value) || 0;
              return (value / 10000).toFixed(1) + 'ä¸‡';
            },
            color: '#06b6d4',
            fontSize: 11
          }
        }]
      };

      charts.tier.setOption(option, true);
    }

    // ========== æ’è¡Œæ¦œå›¾è¡¨ ==========
    function initRankingChart(data = cityData) {
      const chartDom = document.getElementById('chartRanking');
      if (!charts.ranking) {
        charts.ranking = echarts.init(chartDom);
      }

      const top50 = data.slice(0, 50);

      const option = {
        ...commonOptions,
        tooltip: {
          trigger: 'axis',
          axisPointer: {
            type: 'shadow'
          },
          backgroundColor: 'rgba(15, 23, 42, 0.95)',
          borderColor: '#06b6d4',
          textStyle: {
            color: '#f1f5f9'
          },
          formatter: function(params) {
            const city = top50[params[0].dataIndex];
            return `${city.name} (${city.province})<br/>
                    æ’å: ç¬¬${city.rank}å<br/>
                    å·¥èµ„: Â¥${city.salary.toLocaleString()}<br/>
                    ç­‰çº§: ${city.tier}`;
          }
        },
        grid: {
          left: '12%',
          right: '4%',
          bottom: '3%',
          top: '5%'
        },
        xAxis: {
          type: 'value',
          name: 'å¹´è–ªï¼ˆä¸‡å…ƒï¼‰',
          nameTextStyle: {
            color: '#94a3b8'
          },
          axisLabel: {
            color: '#94a3b8',
            formatter: function(value) {
              return value / 10000;
            }
          },
          splitLine: {
            lineStyle: {
              color: '#334155',
              type: 'dashed'
            }
          }
        },
        yAxis: {
          type: 'category',
          data: top50.map(c => c.name),
          axisLabel: {
            color: '#94a3b8'
          },
          axisLine: {
            lineStyle: {
              color: '#334155'
            }
          },
          inverse: true
        },
        series: [{
          name: 'å¹´è–ª',
          type: 'bar',
          data: top50.map(c => c.salary),
          itemStyle: {
            color: function(params) {
              // ä½¿ç”¨åŸºäºæ’åçš„æ¸å˜è‰²ï¼Œæ›´ä¸“ä¸š
              const ratio = params.dataIndex / top50.length;
              if (params.dataIndex < 3) {
                // TOP3ä½¿ç”¨ç‰¹æ®Šé¢œè‰²
                return ['#ef4444', '#f59e0b', '#fbbf24'][params.dataIndex];
              } else if (params.dataIndex < 10) {
                // TOP10ä½¿ç”¨é«˜äº®è‰²
                return '#10b981';
              } else if (params.dataIndex < 20) {
                // TOP20ä½¿ç”¨é’è‰²
                return '#06b6d4';
              } else {
                // å…¶ä»–ä½¿ç”¨è“è‰²æ¸å˜
                return `rgba(59, 130, 246, ${1 - ratio * 0.5})`;
              }
            },
            borderRadius: [0, 4, 4, 0]
          },
          label: {
            show: true,
            position: 'right',
            formatter: function(params) {
              return (params.value / 10000).toFixed(1);
            },
            color: '#06b6d4',
            fontSize: 10
          }
        }]
      };

      charts.ranking.setOption(option, true);
    }

    // ========== æ¸²æŸ“æ’è¡Œæ¦œåˆ—è¡¨ ==========
    function renderRankingList(data = cityData) {
      const container = document.getElementById('rankingList');
      container.innerHTML = '';

      const displayData = data.slice(0, 30);

      displayData.forEach((city, index) => {
        const item = document.createElement('div');
        item.className = 'ranking-item';
        item.innerHTML = `
          <div class="rank-badge">${city.rank}</div>
          <div class="rank-info">
            <div class="rank-city">${city.name}</div>
            <div class="rank-province">${city.province} Â· ${city.tier}</div>
          </div>
          <div class="rank-salary">
            <span class="salary-value">Â¥${(city.salary / 10000).toFixed(1)}ä¸‡</span>
            <div class="salary-tier">${city.tier}</div>
          </div>
        `;
        container.appendChild(item);
      });
    }

    // ========== åˆ†å¸ƒå›¾è¡¨ ==========
    function initDistributionChart(data = cityData) {
      const chartDom = document.getElementById('chartDistribution');
      if (!charts.distribution) {
        charts.distribution = echarts.init(chartDom);
      }

      const ranges = [
        { name: '<8ä¸‡', min: 0, max: 80000 },
        { name: '8-10ä¸‡', min: 80000, max: 100000 },
        { name: '10-12ä¸‡', min: 100000, max: 120000 },
        { name: '12-14ä¸‡', min: 120000, max: 140000 },
        { name: '14-16ä¸‡', min: 140000, max: 160000 },
        { name: '16-18ä¸‡', min: 160000, max: 180000 },
        { name: 'â‰¥18ä¸‡', min: 180000, max: Infinity }
      ];

      const distribution = ranges.map(range => {
        return {
          name: range.name,
          value: data.filter(c => c.salary >= range.min && c.salary < range.max).length
        };
      });

      const option = {
        ...commonOptions,
        tooltip: {
          trigger: 'item',
          backgroundColor: 'rgba(15, 23, 42, 0.95)',
          borderColor: '#06b6d4',
          textStyle: {
            color: '#f1f5f9'
          },
          formatter: '{b}: {c}ä¸ªåŸå¸‚ ({d}%)'
        },
        legend: {
          orient: 'vertical',
          right: '10%',
          top: 'center',
          textStyle: {
            color: '#94a3b8'
          }
        },
        series: [{
          name: 'å·¥èµ„åˆ†å¸ƒ',
          type: 'pie',
          radius: ['40%', '70%'],
          center: ['35%', '50%'],
          avoidLabelOverlap: true,
          itemStyle: {
            borderRadius: 8,
            borderColor: '#020617',
            borderWidth: 2
          },
          label: {
            show: true,
            formatter: '{b}\n{c}ä¸ª',
            color: '#f1f5f9'
          },
          emphasis: {
            label: {
              show: true,
              fontSize: 14,
              fontWeight: 'bold'
            }
          },
          data: distribution,
          color: ['#8b5cf6', '#3b82f6', '#06b6d4', '#10b981', '#f59e0b', '#ef4444', '#ec4899']
        }]
      };

      charts.distribution.setOption(option, true);
    }

    // ========== çœä»½å›¾è¡¨ ==========
    function initProvinceChart(data = cityData) {
      const chartDom = document.getElementById('chartProvince');
      if (!charts.province) {
        charts.province = echarts.init(chartDom);
      }

      const provinceStats = {};
      data.forEach(city => {
        if (!provinceStats[city.province]) {
          provinceStats[city.province] = { total: 0, count: 0 };
        }
        provinceStats[city.province].total += city.salary;
        provinceStats[city.province].count++;
      });

      const provinces = Object.keys(provinceStats)
        .map(p => ({
          name: p,
          avg: Math.round(provinceStats[p].total / provinceStats[p].count),
          count: provinceStats[p].count
        }))
        .sort((a, b) => b.avg - a.avg)
        .slice(0, 20);

      const option = {
        ...commonOptions,
        tooltip: {
          trigger: 'axis',
          axisPointer: {
            type: 'shadow'
          },
          backgroundColor: 'rgba(15, 23, 42, 0.95)',
          borderColor: '#06b6d4',
          textStyle: {
            color: '#f1f5f9'
          },
          formatter: function(params) {
            const data = params[0];
            const province = provinces[data.dataIndex];
            return `${province.name}<br/>
                    å¹³å‡å·¥èµ„: Â¥${province.avg.toLocaleString()}<br/>
                    åŸå¸‚æ•°é‡: ${province.count}ä¸ª`;
          }
        },
        grid: {
          left: '10%',
          right: '4%',
          bottom: '3%',
          top: '5%'
        },
        xAxis: {
          type: 'value',
          name: 'å¹³å‡å¹´è–ªï¼ˆä¸‡å…ƒï¼‰',
          nameTextStyle: {
            color: '#94a3b8'
          },
          axisLabel: {
            color: '#94a3b8',
            formatter: function(value) {
              return value / 10000;
            }
          },
          splitLine: {
            lineStyle: {
              color: '#334155',
              type: 'dashed'
            }
          }
        },
        yAxis: {
          type: 'category',
          data: provinces.map(p => p.name),
          axisLabel: {
            color: '#94a3b8'
          },
          axisLine: {
            lineStyle: {
              color: '#334155'
            }
          },
          inverse: true
        },
        series: [{
          name: 'å¹³å‡å·¥èµ„',
          type: 'bar',
          data: provinces.map(p => p.avg),
          itemStyle: {
            color: new echarts.graphic.LinearGradient(0, 0, 1, 0, [
              { offset: 0, color: '#8b5cf6' },
              { offset: 1, color: '#06b6d4' }
            ]),
            borderRadius: [0, 4, 4, 0]
          },
          label: {
            show: true,
            position: 'right',
            formatter: function(params) {
              return (params.value / 10000).toFixed(1);
            },
            color: '#06b6d4',
            fontSize: 10
          }
        }]
      };

      charts.province.setOption(option, true);
    }

    // ========== åœ°å›¾çƒ­åŠ›å›¾ï¼ˆæ”¹ç”¨æŸ±çŠ¶å›¾å±•ç¤ºï¼‰==========
    function initMapChart(data = cityData) {
      const chartDom = document.getElementById('chartMap');
      if (!charts.map) {
        charts.map = echarts.init(chartDom);
      }

      // è®¡ç®—æ¯ä¸ªçœä»½çš„å¹³å‡å·¥èµ„
      const provinceStats = {};
      data.forEach(city => {
        const province = city.province;
        if (!provinceStats[province]) {
          provinceStats[province] = { total: 0, count: 0, cities: [] };
        }
        provinceStats[province].total += city.salary;
        provinceStats[province].count++;
        provinceStats[province].cities.push(city);
      });

      const provinces = Object.keys(provinceStats)
        .map(p => ({
          name: p,
          value: Math.round(provinceStats[p].total / provinceStats[p].count),
          count: provinceStats[p].count,
          cities: provinceStats[p].cities
        }))
        .sort((a, b) => b.value - a.value)
        .slice(0, 30); // æ˜¾ç¤ºTOP30çœä»½

      const option = {
        ...commonOptions,
        tooltip: {
          trigger: 'axis',
          axisPointer: {
            type: 'shadow'
          },
          backgroundColor: 'rgba(15, 23, 42, 0.95)',
          borderColor: '#06b6d4',
          textStyle: {
            color: '#f1f5f9'
          },
          formatter: function(params) {
            const province = provinces[params[0].dataIndex];
            const topCities = province.cities.sort((a, b) => b.salary - a.salary).slice(0, 3);
            const cityList = topCities.map(c => `${c.name}: Â¥${(c.salary/10000).toFixed(1)}ä¸‡`).join('<br/>');
            return `<strong>${province.name}</strong><br/>
                    å¹³å‡å·¥èµ„: Â¥${province.value.toLocaleString()}<br/>
                    åŸå¸‚æ•°é‡: ${province.count}ä¸ª<br/>
                    <br/><strong>TOP3åŸå¸‚:</strong><br/>
                    ${cityList}`;
          }
        },
        grid: {
          left: '8%',
          right: '4%',
          bottom: '3%',
          top: '10%',
          containLabel: true
        },
        xAxis: {
          type: 'value',
          name: 'å¹³å‡å¹´è–ªï¼ˆä¸‡å…ƒï¼‰',
          nameTextStyle: {
            color: '#94a3b8'
          },
          axisLabel: {
            color: '#94a3b8',
            formatter: function(value) {
              return (value / 10000).toFixed(0);
            }
          },
          splitLine: {
            lineStyle: {
              color: '#334155',
              type: 'dashed'
            }
          }
        },
        yAxis: {
          type: 'category',
          data: provinces.map(p => p.name),
          axisLabel: {
            color: '#94a3b8'
          },
          axisLine: {
            lineStyle: {
              color: '#334155'
            }
          },
          inverse: true
        },
        series: [{
          name: 'å¹³å‡å·¥èµ„',
          type: 'bar',
          data: provinces.map(p => p.value),
          itemStyle: {
            color: function(params) {
              const value = params.value;
              if (value >= 70000) return '#ef4444';
              if (value >= 60000) return '#f59e0b';
              if (value >= 50000) return '#10b981';
              if (value >= 40000) return '#06b6d4';
              if (value >= 30000) return '#3b82f6';
              return '#8b5cf6';
            },
            borderRadius: [0, 4, 4, 0]
          },
          label: {
            show: true,
            position: 'right',
            formatter: function(params) {
              return (params.value / 10000).toFixed(1) + 'ä¸‡';
            },
            color: '#06b6d4',
            fontSize: 11
          },
          emphasis: {
            itemStyle: {
              shadowBlur: 10,
              shadowColor: 'rgba(6, 182, 212, 0.5)'
            }
          }
        }]
      };

      charts.map.setOption(option, true);
    }

    // ========== åŒºåŸŸå¯¹æ¯”å›¾è¡¨ ==========
    function initRegionChart(data = cityData) {
      const chartDom = document.getElementById('chartRegion');
      if (!charts.region) {
        charts.region = echarts.init(chartDom);
      }

      // è®¡ç®—å„åŒºåŸŸç»Ÿè®¡æ•°æ®
      const regionStats = {};
      Object.keys(regionData).forEach(region => {
        regionStats[region] = { total: 0, count: 0, provinces: [] };
      });

      data.forEach(city => {
        for (const [region, provinces] of Object.entries(regionData)) {
          if (provinces.includes(city.province)) {
            regionStats[region].total += city.salary;
            regionStats[region].count++;
            if (!regionStats[region].provinces.includes(city.province)) {
              regionStats[region].provinces.push(city.province);
            }
            break;
          }
        }
      });

      const regions = Object.keys(regionStats).map(r => ({
        name: r,
        value: regionStats[r].count > 0 ? Math.round(regionStats[r].total / regionStats[r].count) : 0,
        count: regionStats[r].count,
        provinces: regionStats[r].provinces.length
      }));

      const option = {
        ...commonOptions,
        tooltip: {
          trigger: 'axis',
          axisPointer: {
            type: 'shadow'
          },
          backgroundColor: 'rgba(15, 23, 42, 0.95)',
          borderColor: '#06b6d4',
          textStyle: {
            color: '#f1f5f9'
          },
          formatter: function(params) {
            const data = params[0];
            const region = regions[data.dataIndex];
            return `${region.name}åœ°åŒº<br/>
                    å¹³å‡å·¥èµ„: Â¥${region.value.toLocaleString()}<br/>
                    åŸå¸‚æ•°é‡: ${region.count}ä¸ª<br/>
                    çœä»½æ•°é‡: ${region.provinces}ä¸ª`;
          }
        },
        xAxis: {
          type: 'category',
          data: regions.map(r => r.name),
          axisLabel: {
            color: '#94a3b8',
            fontSize: 14
          },
          axisLine: {
            lineStyle: {
              color: '#334155'
            }
          }
        },
        yAxis: {
          type: 'value',
          name: 'å¹³å‡å¹´è–ªï¼ˆå…ƒï¼‰',
          nameTextStyle: {
            color: '#94a3b8'
          },
          axisLabel: {
            color: '#94a3b8',
            formatter: function(value) {
              return (value / 10000).toFixed(0) + 'ä¸‡';
            }
          },
          splitLine: {
            lineStyle: {
              color: '#334155',
              type: 'dashed'
            }
          }
        },
        series: [{
          name: 'å¹³å‡å·¥èµ„',
          type: 'bar',
          data: regions.map(r => r.value),
          itemStyle: {
            color: function(params) {
              const colors = ['#ef4444', '#f59e0b', '#10b981', '#06b6d4'];
              return colors[params.dataIndex % colors.length];
            },
            borderRadius: [8, 8, 0, 0]
          },
          label: {
            show: true,
            position: 'top',
            formatter: function(params) {
              return (params.value / 10000).toFixed(1) + 'ä¸‡';
            },
            color: '#06b6d4',
            fontSize: 12,
            fontWeight: 'bold'
          },
          barWidth: '50%'
        }]
      };

      charts.region.setOption(option, true);

      // æ›´æ–°åŒºåŸŸç»Ÿè®¡å¡ç‰‡
      updateRegionStats(regionStats);
    }

    // ========== æ›´æ–°åŒºåŸŸç»Ÿè®¡æ•°æ® ==========
    function updateRegionStats(regionStats) {
      const eastData = regionStats['ä¸œéƒ¨'];
      const centralData = regionStats['ä¸­éƒ¨'];
      const westData = regionStats['è¥¿éƒ¨'];

      document.getElementById('eastAvg').textContent = eastData && eastData.count > 0
        ? 'Â¥' + Math.round(eastData.total / eastData.count).toLocaleString()
        : 'Â¥0';

      document.getElementById('centralAvg').textContent = centralData && centralData.count > 0
        ? 'Â¥' + Math.round(centralData.total / centralData.count).toLocaleString()
        : 'Â¥0';

      document.getElementById('westAvg').textContent = westData && westData.count > 0
        ? 'Â¥' + Math.round(westData.total / westData.count).toLocaleString()
        : 'Â¥0';

      // æ‰¾å‡ºå·¥èµ„æœ€é«˜çš„çœä»½
      const provinceStats = {};
      cityData.forEach(city => {
        if (!provinceStats[city.province]) {
          provinceStats[city.province] = { total: 0, count: 0 };
        }
        provinceStats[city.province].total += city.salary;
        provinceStats[city.province].count++;
      });

      const provinces = Object.keys(provinceStats)
        .map(p => ({
          name: p,
          avg: Math.round(provinceStats[p].total / provinceStats[p].count)
        }))
        .sort((a, b) => b.avg - a.avg);

      if (provinces.length > 0) {
        document.getElementById('topProvince').textContent = provinces[0].name;
        document.getElementById('topProvinceSalary').textContent = 'Â¥' + provinces[0].avg.toLocaleString();
      }
    }

    // ========== å¯¹æ¯”å›¾è¡¨ï¼ˆä¼˜åŒ–ä¸ºæŸ±çŠ¶å›¾ï¼‰==========
    function initComparisonChart() {
      const chartDom = document.getElementById('chartComparison');
      if (!charts.comparison) {
        charts.comparison = echarts.init(chartDom);
      }

      const option = {
        ...commonOptions,
        tooltip: {
          trigger: 'axis',
          axisPointer: {
            type: 'shadow'
          },
          backgroundColor: 'rgba(15, 23, 42, 0.95)',
          borderColor: '#06b6d4',
          textStyle: {
            color: '#f1f5f9'
          }
        },
        legend: {
          data: ['åŸå¸‚1', 'åŸå¸‚2'],
          textStyle: {
            color: '#94a3b8'
          },
          top: '5%'
        },
        grid: {
          left: '3%',
          right: '4%',
          bottom: '3%',
          top: '15%',
          containLabel: true
        },
        xAxis: {
          type: 'category',
          data: ['å¹´å¹³å‡å·¥èµ„', 'å…¨å›½æ’å', 'é«˜äºå…¨å›½å¹³å‡'],
          axisLabel: {
            color: '#94a3b8',
            rotate: 0
          },
          axisLine: {
            lineStyle: {
              color: '#334155'
            }
          }
        },
        yAxis: {
          type: 'value',
          axisLabel: {
            color: '#94a3b8'
          },
          splitLine: {
            lineStyle: {
              color: '#334155',
              type: 'dashed'
            }
          }
        },
        series: [
          {
            name: 'åŸå¸‚1',
            type: 'bar',
            data: [0, 0, 0],
            itemStyle: {
              color: '#06b6d4',
              borderRadius: [4, 4, 0, 0]
            },
            label: {
              show: true,
              position: 'top',
              color: '#06b6d4'
            }
          },
          {
            name: 'åŸå¸‚2',
            type: 'bar',
            data: [0, 0, 0],
            itemStyle: {
              color: '#8b5cf6',
              borderRadius: [4, 4, 0, 0]
            },
            label: {
              show: true,
              position: 'top',
              color: '#8b5cf6'
            }
          }
        ]
      };

      charts.comparison.setOption(option, true);
    }

    // ========== å¡«å……åŸå¸‚é€‰æ‹©å™¨ ==========
    function populateCitySelects() {
      const select1 = document.getElementById('compareCity1');
      const select2 = document.getElementById('compareCity2');

      cityData.slice(0, 50).forEach(city => {
        const option1 = document.createElement('option');
        option1.value = city.name;
        option1.textContent = `${city.name} (Â¥${(city.salary / 10000).toFixed(1)}ä¸‡)`;
        select1.appendChild(option1);

        const option2 = option1.cloneNode(true);
        select2.appendChild(option2);
      });
    }

    // ========== æ›´æ–°å¯¹æ¯” ==========
    window.updateComparison = function() {
      const city1Name = document.getElementById('compareCity1').value;
      const city2Name = document.getElementById('compareCity2').value;

      if (city1Name === 'é€‰æ‹©åŸå¸‚1' || city2Name === 'é€‰æ‹©åŸå¸‚2') {
        alert('è¯·é€‰æ‹©ä¸¤ä¸ªåŸå¸‚è¿›è¡Œå¯¹æ¯”');
        return;
      }

      const city1 = cityData.find(c => c.name === city1Name);
      const city2 = cityData.find(c => c.name === city2Name);

      if (!city1 || !city2) return;

      const avgSalary = cityData.reduce((sum, c) => sum + c.salary, 0) / cityData.length;

      // æ›´æ–°å¯¹æ¯”å¡ç‰‡
      const grid = document.getElementById('comparisonGrid');
      grid.innerHTML = `
        <div class="comparison-card">
          <div class="comparison-header">
            <div class="comparison-city">${city1.name}</div>
            <div class="comparison-rank">ç¬¬${city1.rank}å</div>
          </div>
          <div class="comparison-stats">
            <div class="comparison-row">
              <span class="comparison-label">å¹´å¹³å‡å·¥èµ„</span>
              <span class="comparison-value">Â¥${city1.salary.toLocaleString()}</span>
            </div>
            <div class="comparison-row">
              <span class="comparison-label">åŸå¸‚ç­‰çº§</span>
              <span class="comparison-value">${city1.tier}</span>
            </div>
            <div class="comparison-row">
              <span class="comparison-label">æ‰€å±çœä»½</span>
              <span class="comparison-value">${city1.province}</span>
            </div>
            <div class="comparison-row">
              <span class="comparison-label">é«˜äºå…¨å›½å¹³å‡</span>
              <span class="comparison-value">${((city1.salary / avgSalary - 1) * 100).toFixed(1)}%</span>
            </div>
          </div>
        </div>
        <div class="comparison-card">
          <div class="comparison-header">
            <div class="comparison-city">${city2.name}</div>
            <div class="comparison-rank">ç¬¬${city2.rank}å</div>
          </div>
          <div class="comparison-stats">
            <div class="comparison-row">
              <span class="comparison-label">å¹´å¹³å‡å·¥èµ„</span>
              <span class="comparison-value">Â¥${city2.salary.toLocaleString()}</span>
            </div>
            <div class="comparison-row">
              <span class="comparison-label">åŸå¸‚ç­‰çº§</span>
              <span class="comparison-value">${city2.tier}</span>
            </div>
            <div class="comparison-row">
              <span class="comparison-label">æ‰€å±çœä»½</span>
              <span class="comparison-value">${city2.province}</span>
            </div>
            <div class="comparison-row">
              <span class="comparison-label">é«˜äºå…¨å›½å¹³å‡</span>
              <span class="comparison-value">${((city2.salary / avgSalary - 1) * 100).toFixed(1)}%</span>
            </div>
          </div>
        </div>
      `;

      // æ›´æ–°å¯¹æ¯”æŸ±çŠ¶å›¾
      const avgRankForComparison = Math.max(city1.rank, city2.rank) + 50; // è®¾ç½®åˆç†çš„æœ€å¤§æ’åç”¨äºå½’ä¸€åŒ–
      charts.comparison.setOption({
        legend: {
          data: [city1.name, city2.name]
        },
        yAxis: {
          max: function(value) {
            // åŠ¨æ€è®¾ç½®Yè½´æœ€å¤§å€¼
            return Math.ceil(value.max * 1.2);
          }
        },
        series: [
          {
            name: city1.name,
            data: [
              {
                value: city1.salary,
                label: {
                  formatter: 'Â¥' + (city1.salary / 10000).toFixed(1) + 'ä¸‡'
                }
              },
              {
                value: avgRankForComparison - city1.rank, // æ’åè¶Šå°è¶Šå¥½ï¼Œæ‰€ä»¥åè½¬
                label: {
                  formatter: 'ç¬¬' + city1.rank + 'å'
                }
              },
              {
                value: ((city1.salary / avgSalary - 1) * 100).toFixed(1),
                label: {
                  formatter: '+' + ((city1.salary / avgSalary - 1) * 100).toFixed(1) + '%'
                }
              }
            ]
          },
          {
            name: city2.name,
            data: [
              {
                value: city2.salary,
                label: {
                  formatter: 'Â¥' + (city2.salary / 10000).toFixed(1) + 'ä¸‡'
                }
              },
              {
                value: avgRankForComparison - city2.rank,
                label: {
                  formatter: 'ç¬¬' + city2.rank + 'å'
                }
              },
              {
                value: ((city2.salary / avgSalary - 1) * 100).toFixed(1),
                label: {
                  formatter: '+' + ((city2.salary / avgSalary - 1) * 100).toFixed(1) + '%'
                }
              }
            ]
          }
        ]
      });
    };

    // ========== æ›´æ–°æ‰€æœ‰å›¾è¡¨ï¼ˆæ ¸å¿ƒå‡½æ•°ï¼‰==========
    function updateAllCharts(data) {
      state.filteredData = data;
      updateStats(data);
      initOverviewChart(data);
      initTierChart(data);
      initMapChart(data);
      initRegionChart(data);
      initRankingChart(data);
      renderRankingList(data);
      initDistributionChart(data);
      initProvinceChart(data);
    }

    // ========== å¡«å……çœä»½é€‰æ‹©å™¨ ==========
    function populateProvinceFilter() {
      const provinces = [...new Set(cityData.map(c => c.province))].sort();
      const select = document.getElementById('provinceFilter');

      provinces.forEach(province => {
        const option = document.createElement('option');
        option.value = province;
        option.textContent = province;
        select.appendChild(option);
      });
    }

    // ========== å·¥èµ„èŒƒå›´æ»‘å—æ›´æ–° ==========
    function setupSalaryRangeSliders() {
      const minSlider = document.getElementById('salaryMinRange');
      const maxSlider = document.getElementById('salaryMaxRange');
      const rangeText = document.getElementById('salaryRangeText');

      function updateRangeText() {
        const min = parseInt(minSlider.value);
        const max = parseInt(maxSlider.value);

        // ç¡®ä¿æœ€å°å€¼ä¸å¤§äºæœ€å¤§å€¼
        if (min > max) {
          minSlider.value = max;
        }

        const minText = (min / 10000).toFixed(1) + 'ä¸‡';
        const maxText = (max / 10000).toFixed(1) + 'ä¸‡';
        rangeText.textContent = `${minText} - ${maxText}`;

        state.salaryMin = parseInt(minSlider.value);
        state.salaryMax = parseInt(maxSlider.value);
      }

      minSlider.addEventListener('input', updateRangeText);
      maxSlider.addEventListener('input', updateRangeText);
    }

    // ========== åº”ç”¨é«˜çº§ç­›é€‰ ==========
    window.applyAdvancedFilter = function() {
      state.currentProvince = document.getElementById('provinceFilter').value;
      filterData();
    };

    // ========== é‡ç½®æ‰€æœ‰ç­›é€‰ ==========
    window.resetFilters = function() {
      // é‡ç½®çŠ¶æ€
      state.currentFilter = 'all';
      state.currentSearch = '';
      state.currentProvince = 'all';
      state.salaryMin = 12000;
      state.salaryMax = 190000;

      // é‡ç½®UI
      document.getElementById('searchInput').value = '';
      document.getElementById('provinceFilter').value = 'all';
      document.getElementById('salaryMinRange').value = 12000;
      document.getElementById('salaryMaxRange').value = 190000;
      document.getElementById('salaryRangeText').textContent = '1.2ä¸‡ - 19ä¸‡';

      // é‡ç½®ç­‰çº§æŒ‰é’®
      document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
      document.querySelector('[data-tier="all"]').classList.add('active');

      // æ›´æ–°å›¾è¡¨
      updateAllCharts(cityData);
    };

    // ========== ç­›é€‰åŠŸèƒ½ï¼ˆå¢å¼ºç‰ˆï¼‰==========
    function filterData() {
      let filtered = cityData;

      // åº”ç”¨ç­‰çº§ç­›é€‰
      if (state.currentFilter !== 'all') {
        filtered = filtered.filter(c => c.tier === state.currentFilter);
      }

      // åº”ç”¨çœä»½ç­›é€‰
      if (state.currentProvince !== 'all') {
        filtered = filtered.filter(c => c.province === state.currentProvince);
      }

      // åº”ç”¨å·¥èµ„èŒƒå›´ç­›é€‰
      filtered = filtered.filter(c => c.salary >= state.salaryMin && c.salary <= state.salaryMax);

      // åº”ç”¨æœç´¢ç­›é€‰
      if (state.currentSearch) {
        const keyword = state.currentSearch.toLowerCase();
        filtered = filtered.filter(c =>
          c.name.toLowerCase().includes(keyword) ||
          c.province.toLowerCase().includes(keyword)
        );
      }

      // æ›´æ–°æ‰€æœ‰å›¾è¡¨
      updateAllCharts(filtered);
    }

    // ========== æœç´¢åŠŸèƒ½ï¼ˆä¿®å¤ç‰ˆ + é˜²æŠ–ï¼‰==========
    const handleSearch = debounce(function(e) {
      state.currentSearch = e.target.value.trim();
      filterData();
    }, 300);

    document.getElementById('searchInput').addEventListener('input', handleSearch);

    // ========== ç­‰çº§ç­›é€‰åŠŸèƒ½ï¼ˆä¿®å¤ç‰ˆï¼‰==========
    document.querySelectorAll('.filter-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
        this.classList.add('active');

        state.currentFilter = this.getAttribute('data-tier');
        filterData();
      });
    });

    // ========== Tabåˆ‡æ¢ ==========
    document.querySelectorAll('.tab-item').forEach(tab => {
      tab.addEventListener('click', function() {
        document.querySelectorAll('.tab-item').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        
        this.classList.add('active');
        const tabId = this.getAttribute('data-tab');
        document.getElementById(tabId).classList.add('active');

        // å»¶è¿Ÿè°ƒæ•´å›¾è¡¨å¤§å°
        setTimeout(() => {
          Object.values(charts).forEach(chart => {
            if (chart) chart.resize();
          });
        }, 100);
      });
    });

    // ========== çª—å£å¤§å°å˜åŒ–ï¼ˆèŠ‚æµä¼˜åŒ–ï¼‰==========
    window.addEventListener('resize', throttle(() => {
      Object.values(charts).forEach(chart => {
        if (chart) chart.resize();
      });
    }, 300));

    // ========== åˆå§‹åŒ–æ‰€æœ‰åŠŸèƒ½ ==========
    function init() {
      console.log('ğŸš€ å¼€å§‹åˆå§‹åŒ–...');

      updateStats();
      initOverviewChart();
      initTierChart();
      initMapChart();
      initRegionChart();
      initRankingChart();
      renderRankingList();
      initDistributionChart();
      initProvinceChart();
      initComparisonChart();
      populateCitySelects();
      populateProvinceFilter();
      setupSalaryRangeSliders();

      // éšè—åŠ è½½ç•Œé¢
      setTimeout(() => {
        const loading = document.getElementById('loading');
        loading.classList.add('hide');
        setTimeout(() => loading.remove(), 500);
        console.log('âœ… åˆå§‹åŒ–å®Œæˆ');
      }, 600);
    }

    // ç­‰å¾…EChartsåŠ è½½å®Œæˆ
    if (typeof echarts !== 'undefined') {
      init();
    } else {
      window.addEventListener('load', init);
    }

  })();

  // ========== æ•°æ®è¯´æ˜å¼¹çª—æ§åˆ¶ ==========
  function openDataInfo() {
    document.getElementById('dataInfoModal').classList.add('active');
    document.body.style.overflow = 'hidden';
  }

  function closeDataInfo() {
    document.getElementById('dataInfoModal').classList.remove('active');
    document.body.style.overflow = 'auto';
  }

  // ç‚¹å‡»å¼¹çª—å¤–éƒ¨å…³é—­
  document.getElementById('dataInfoModal').addEventListener('click', function(e) {
    if (e.target === this) {
      closeDataInfo();
    }
  });

  // ESCé”®å…³é—­å¼¹çª—
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
      closeDataInfo();
    }
  });
  </script>
  
  <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?e0034dc89db8ac4d1390f38559f842ec";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

</body>
</html>
